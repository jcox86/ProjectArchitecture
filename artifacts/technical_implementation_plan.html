<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Technical Implementation Plan - Inventory SaaS</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'SF Mono', 'Consolas', 'Monaco', monospace;
            background: #0d1117;
            color: #c9d1d9;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: #161b22;
            border-radius: 12px;
            border: 1px solid #30363d;
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #1f6feb 0%, #58a6ff 100%);
            padding: 40px;
            border-bottom: 3px solid #58a6ff;
        }
        
        .header h1 {
            font-size: 2.5em;
            color: white;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .header p {
            color: rgba(255,255,255,0.9);
            font-size: 1.1em;
        }
        
        .nav-tabs {
            display: flex;
            background: #0d1117;
            border-bottom: 1px solid #30363d;
            overflow-x: auto;
        }
        
        .tab {
            padding: 15px 25px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
            transition: all 0.3s;
            color: #8b949e;
        }
        
        .tab:hover {
            background: #161b22;
            color: #c9d1d9;
        }
        
        .tab.active {
            border-bottom-color: #58a6ff;
            color: #58a6ff;
            background: #161b22;
        }
        
        .content {
            padding: 40px;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section {
            margin-bottom: 40px;
            background: #0d1117;
            padding: 25px;
            border-radius: 8px;
            border: 1px solid #30363d;
        }
        
        .section h2 {
            color: #58a6ff;
            font-size: 1.8em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section h3 {
            color: #79c0ff;
            font-size: 1.3em;
            margin: 25px 0 15px 0;
            border-bottom: 1px solid #30363d;
            padding-bottom: 8px;
        }
        
        .code-block {
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 6px;
            padding: 20px;
            margin: 15px 0;
            overflow-x: auto;
            font-size: 0.9em;
        }
        
        .code-block code {
            color: #79c0ff;
            font-family: 'SF Mono', 'Consolas', 'Monaco', monospace;
        }
        
        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .tech-card {
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 20px;
            transition: all 0.3s;
        }
        
        .tech-card:hover {
            border-color: #58a6ff;
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(88, 166, 255, 0.1);
        }
        
        .tech-card h4 {
            color: #58a6ff;
            margin-bottom: 10px;
            font-size: 1.2em;
        }
        
        .tech-card .label {
            display: inline-block;
            background: #1f6feb;
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.75em;
            margin-bottom: 10px;
        }
        
        .tech-card ul {
            list-style: none;
            padding-left: 0;
        }
        
        .tech-card li {
            padding: 5px 0;
            color: #8b949e;
        }
        
        .tech-card li:before {
            content: "â†’ ";
            color: #58a6ff;
        }
        
        .feature-list {
            list-style: none;
            padding-left: 0;
        }
        
        .feature-list li {
            padding: 12px 0;
            border-bottom: 1px solid #30363d;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }
        
        .feature-list li:last-child {
            border-bottom: none;
        }
        
        .priority-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: 600;
            flex-shrink: 0;
        }
        
        .priority-mvp {
            background: #1f6feb;
            color: white;
        }
        
        .priority-stretch {
            background: #8957e5;
            color: white;
        }
        
        .priority-edge {
            background: #da3633;
            color: white;
        }
        
        .feature-content {
            flex-grow: 1;
        }
        
        .feature-title {
            color: #c9d1d9;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .feature-desc {
            color: #8b949e;
            font-size: 0.9em;
        }
        
        .api-endpoint {
            background: #0d1117;
            border-left: 3px solid #58a6ff;
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
        }
        
        .method {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.85em;
            margin-right: 10px;
        }
        
        .method-get { background: #238636; color: white; }
        .method-post { background: #1f6feb; color: white; }
        .method-put { background: #d29922; color: white; }
        .method-delete { background: #da3633; color: white; }
        
        .warning {
            background: #3d2b00;
            border-left: 3px solid #d29922;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .warning strong {
            color: #d29922;
        }
        
        .info {
            background: #0d2c54;
            border-left: 3px solid #58a6ff;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .info strong {
            color: #58a6ff;
        }
        
        .success {
            background: #0b2818;
            border-left: 3px solid #238636;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .success strong {
            color: #238636;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #30363d;
        }
        
        th {
            background: #0d1117;
            color: #58a6ff;
            font-weight: 600;
        }
        
        tr:hover {
            background: #0d1117;
        }
        
        .checklist {
            list-style: none;
            padding-left: 0;
        }
        
        .checklist li {
            padding: 10px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .checklist input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        
        .diagram {
            background: #0d1117;
            border: 1px solid #30363d;
            padding: 30px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
        }
        
        .diagram pre {
            text-align: left;
            display: inline-block;
            color: #79c0ff;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>âš™ï¸ Technical Implementation Plan</h1>
            <p>Complete architecture, tech stack, and competitive edge features for your inventory SaaS</p>
        </div>
        
        <div class="nav-tabs">
            <div class="tab" onclick="switchTab(0)">Architecture</div>
            <div class="tab" onclick="switchTab(1)">Tech Stack</div>
            <div class="tab" onclick="switchTab(2)">TDD Workflow</div>
            <div class="tab" onclick="switchTab(3)">Database Schema</div>
            <div class="tab" onclick="switchTab(4)">API Design</div>
            <div class="tab" onclick="switchTab(5)">Core Features</div>
            <div class="tab" onclick="switchTab(6)">Competitive Edge</div>
            <div class="tab" onclick="switchTab(7)">Security & Performance</div>
            <div class="tab" onclick="switchTab(8)">Deployment</div>
        </div>
        
        <div class="content">
            <!-- Tab 1: Architecture -->
            <div class="tab-content active">
                <div class="section">
                    <h2>ğŸ—ï¸ System Architecture</h2>
                    
                    <h3>Recommended Architecture: Monolith-First Approach</h3>
                    <p>Start with a simple, well-structured monolith. Scale to microservices only when needed (10k+ users).</p>
                    
                    <div class="diagram">
                        <pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CLIENT LAYER                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Sales Site  â”‚  â”‚   App Site   â”‚  â”‚    Admin     â”‚  â”‚
â”‚  â”‚  (Vue/Vite)  â”‚  â”‚  (Vue/Vite)  â”‚  â”‚  (Vue/Vite)  â”‚  â”‚
â”‚  â”‚   Marketing  â”‚  â”‚  Inventory   â”‚  â”‚  Backoffice  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CDN / EDGE CACHE                      â”‚
â”‚           (Cloudflare / Vercel Edge Network)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  APPLICATION LAYER                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         Node.js + Express REST API               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  Auth  â”‚  â”‚ Items  â”‚  â”‚ Admin  â”‚  â”‚Webhook â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  API   â”‚  â”‚  API   â”‚  â”‚  API   â”‚  â”‚ Queue  â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATA LAYER                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PostgreSQL  â”‚  â”‚     Redis    â”‚  â”‚   S3/CDN     â”‚  â”‚
â”‚  â”‚   Primary    â”‚  â”‚    Cache     â”‚  â”‚  File Store  â”‚  â”‚
â”‚  â”‚   Database   â”‚  â”‚   Sessions   â”‚  â”‚   (Images)   â”‚  â”‚
â”‚  â”‚  (with RLS)  â”‚  â”‚  Rate Limit  â”‚  â”‚              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                EXTERNAL SERVICES                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Stripe â”‚  â”‚SendGridâ”‚  â”‚ Sentry â”‚  â”‚PostHog â”‚       â”‚
â”‚  â”‚Payment â”‚  â”‚ Email  â”‚  â”‚ Errors â”‚  â”‚Analyticsâ”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

THREE SEPARATE DEPLOYMENTS:
1. Sales Site (sales.yourdomain.com) - Public marketing + pricing
2. App Site (app.yourdomain.com) - Authenticated inventory app
3. Admin Portal (admin.yourdomain.com) - Internal backoffice
4. API Server (api.yourdomain.com) - Shared backend for all
                        </pre>
                    </div>
                    
                    <h3>Key Architectural Decisions</h3>
                    
                    <div class="tech-stack">
                        <div class="tech-card">
                            <h4>Multi-App Architecture</h4>
                            <div class="label">RECOMMENDED</div>
                            <ul>
                                <li>3 separate Vite apps (monorepo)</li>
                                <li>Shared API backend</li>
                                <li>Independent deployments</li>
                                <li>Optimized bundle per app</li>
                                <li>Clear separation of concerns</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Monorepo Structure</h4>
                            <div class="label">ORGANIZATION</div>
                            <ul>
                                <li>Use pnpm workspaces</li>
                                <li>Shared TypeScript types</li>
                                <li>Common utilities/composables</li>
                                <li>Unified testing setup</li>
                                <li>Single CI/CD pipeline</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Multi-Tenancy</h4>
                            <div class="label">CRITICAL</div>
                            <ul>
                                <li>Shared database, tenant isolation</li>
                                <li>org_id in every table</li>
                                <li>Row-level security in Postgres</li>
                                <li>Tenant context in middleware</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Real-Time Updates</h4>
                            <div class="label">STRETCH GOAL</div>
                            <ul>
                                <li>WebSocket for live inventory</li>
                                <li>Socket.io or native WebSocket</li>
                                <li>Show changes from team members</li>
                                <li>Low stock alerts push</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Offline-First PWA</h4>
                            <div class="label">COMPETITIVE EDGE</div>
                            <ul>
                                <li>Vite PWA plugin</li>
                                <li>Service Workers + IndexedDB</li>
                                <li>View inventory when offline</li>
                                <li>Queue changes, sync when online</li>
                                <li>PWA installable on all devices</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Feature Flags</h4>
                            <div class="label">ADMIN PORTAL</div>
                            <ul>
                                <li>Toggle features per org</li>
                                <li>A/B testing capability</li>
                                <li>Gradual rollouts</li>
                                <li>Kill switch for issues</li>
                                <li>Store in database</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="info">
                        <strong>Why Monolith First?</strong> Premature microservices add complexity without benefit. You can always extract services later when you have real scale issues. Start simple, iterate fast.
                    </div>
                </div>
            </div>
            
            <!-- Tab 2: Tech Stack -->
            <div class="tab-content">
                <div class="section">
                    <h2>ğŸ› ï¸ Recommended Tech Stack</h2>
                    
                    <h3>Frontend Stack</h3>
                    <div class="tech-stack">
                        <div class="tech-card">
                            <h4>Vite 5+</h4>
                            <div class="label">BUILD TOOL</div>
                            <ul>
                                <li>Lightning-fast HMR</li>
                                <li>Optimized production builds</li>
                                <li>Native ES modules</li>
                                <li>Excellent TypeScript support</li>
                                <li>Built-in test support (Vitest)</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Vue 3 Composition API</h4>
                            <div class="label">PRIMARY FRAMEWORK</div>
                            <ul>
                                <li>Reactive, performant UI</li>
                                <li>Composition API for logic reuse</li>
                                <li>TypeScript first-class support</li>
                                <li>Smaller bundle than React</li>
                                <li>Great DX with Volar</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>TypeScript</h4>
                            <div class="label">ESSENTIAL</div>
                            <ul>
                                <li>Type safety for large codebase</li>
                                <li>Better DX with autocomplete</li>
                                <li>Catch bugs at compile time</li>
                                <li>Required for scaling team</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Naive UI</h4>
                            <div class="label">UI COMPONENTS</div>
                            <ul>
                                <li>Complete Vue 3 component library</li>
                                <li>80+ high-quality components</li>
                                <li>TypeScript support out of box</li>
                                <li>Customizable theming</li>
                                <li>Tree-shakable, small bundle</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Vue Router 4</h4>
                            <div class="label">ROUTING</div>
                            <ul>
                                <li>File-based routing (unplugin-vue-router)</li>
                                <li>Nested routes & layouts</li>
                                <li>Navigation guards</li>
                                <li>TypeScript route definitions</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Pinia</h4>
                            <div class="label">STATE MANAGEMENT</div>
                            <ul>
                                <li>Official Vue state library</li>
                                <li>Composition API style</li>
                                <li>Lightweight, intuitive API</li>
                                <li>DevTools integration</li>
                                <li>TypeScript support excellent</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>VueUse</h4>
                            <div class="label">UTILITIES</div>
                            <ul>
                                <li>200+ composition utilities</li>
                                <li>Lifecycle, state, sensors</li>
                                <li>Network requests, storage</li>
                                <li>Animation, components</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>TanStack Query Vue</h4>
                            <div class="label">DATA FETCHING</div>
                            <ul>
                                <li>Server state management</li>
                                <li>Auto caching & refetching</li>
                                <li>Optimistic updates</li>
                                <li>Handles loading/error states</li>
                            </ul>
                        </div>
                    </div>
                    
                    <h3>Backend Stack</h3>
                    <div class="tech-stack">
                        <div class="tech-card">
                            <h4>Node.js + Express</h4>
                            <div class="label">API SERVER</div>
                            <ul>
                                <li>Mature, battle-tested</li>
                                <li>Middleware ecosystem</li>
                                <li>TypeScript support excellent</li>
                                <li>Easy to test</li>
                                <li>Deploy anywhere</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>PostgreSQL 15+</h4>
                            <div class="label">DATABASE</div>
                            <ul>
                                <li>Powerful relational DB</li>
                                <li>JSONB for flexibility</li>
                                <li>Full-text search built-in</li>
                                <li>Row-level security (RLS)</li>
                                <li>Use Supabase or Neon</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Prisma ORM</h4>
                            <div class="label">ORM</div>
                            <ul>
                                <li>Type-safe database client</li>
                                <li>Auto-generated types</li>
                                <li>Migrations made easy</li>
                                <li>Great DX with Studio</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Passport.js + JWT</h4>
                            <div class="label">AUTHENTICATION</div>
                            <ul>
                                <li>Flexible auth strategies</li>
                                <li>Local + OAuth support</li>
                                <li>JWT for stateless auth</li>
                                <li>Session management</li>
                                <li>Or use Supabase Auth</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Redis / Upstash</h4>
                            <div class="label">CACHING</div>
                            <ul>
                                <li>Session storage</li>
                                <li>Rate limiting</li>
                                <li>Cache frequent queries</li>
                                <li>Bull queue for jobs</li>
                                <li>Upstash for serverless</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Zod</h4>
                            <div class="label">VALIDATION</div>
                            <ul>
                                <li>Schema validation</li>
                                <li>Type inference</li>
                                <li>Parse API inputs</li>
                                <li>Works with Prisma</li>
                            </ul>
                        </div>
                    </div>
                    
                    <h3>Testing Stack (TDD)</h3>
                    <div class="tech-stack">
                        <div class="tech-card">
                            <h4>Vitest</h4>
                            <div class="label">UNIT TESTING</div>
                            <ul>
                                <li>Vite-native test runner</li>
                                <li>Jest-compatible API</li>
                                <li>Fast parallel execution</li>
                                <li>Component testing support</li>
                                <li>Coverage reports built-in</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Vue Test Utils</h4>
                            <div class="label">COMPONENT TESTS</div>
                            <ul>
                                <li>Official Vue testing library</li>
                                <li>Mount & interact with components</li>
                                <li>Mock dependencies easily</li>
                                <li>TypeScript support</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Playwright</h4>
                            <div class="label">E2E TESTING</div>
                            <ul>
                                <li>Cross-browser testing</li>
                                <li>Auto-wait, retry logic</li>
                                <li>Network interception</li>
                                <li>Video/screenshot capture</li>
                                <li>Great debugging tools</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Supertest</h4>
                            <div class="label">API TESTING</div>
                            <ul>
                                <li>HTTP assertion library</li>
                                <li>Test Express endpoints</li>
                                <li>Works with Vitest</li>
                                <li>Easy request mocking</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>MSW (Mock Service Worker)</h4>
                            <div class="label">API MOCKING</div>
                            <ul>
                                <li>Intercept network requests</li>
                                <li>Mock APIs in tests</li>
                                <li>Works in browser & Node</li>
                                <li>Reusable mock handlers</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Factory Bot / Faker</h4>
                            <div class="label">TEST DATA</div>
                            <ul>
                                <li>Generate realistic test data</li>
                                <li>Factories for DB models</li>
                                <li>Consistent test fixtures</li>
                                <li>Avoid test brittleness</li>
                            </ul>
                        </div>
                    </div>
                    
                    <h3>Infrastructure & DevOps</h3>
                    <div class="tech-stack">
                        <div class="tech-card">
                            <h4>Vercel / Netlify</h4>
                            <div class="label">FRONTEND HOSTING</div>
                            <ul>
                                <li>Deploy 3 Vite apps separately</li>
                                <li>Automatic HTTPS & CDN</li>
                                <li>Preview deployments per PR</li>
                                <li>Edge functions support</li>
                                <li>Custom domains per app</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Railway / Render</h4>
                            <div class="label">API HOSTING</div>
                            <ul>
                                <li>Deploy Node.js/Express API</li>
                                <li>Auto-scaling available</li>
                                <li>Built-in PostgreSQL option</li>
                                <li>Environment variables</li>
                                <li>WebSocket support</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Supabase / Neon</h4>
                            <div class="label">DATABASE HOST</div>
                            <ul>
                                <li>Managed PostgreSQL</li>
                                <li>Auto backups</li>
                                <li>Supabase: Auth + Storage + RLS</li>
                                <li>Neon: Serverless Postgres</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Cloudflare R2</h4>
                            <div class="label">FILE STORAGE</div>
                            <ul>
                                <li>S3-compatible storage</li>
                                <li>Cheaper than S3</li>
                                <li>CDN included</li>
                                <li>For product images</li>
                            </ul>
                        </div>
                    </div>
                    
                    <h3>Monorepo Structure</h3>
                    <div class="code-block">
<code>inventory-saas/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ sales/                    # Sales/marketing site
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Home.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Pricing.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Features.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ App.vue
â”‚   â”‚   â”‚   â””â”€â”€ main.ts
â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ app/                      # Main inventory app
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ItemList.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ItemForm.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ BarcodeScanner.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Items.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Reports.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ composables/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ useItems.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ inventory.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ router/
â”‚   â”‚   â”‚   â”œâ”€â”€ App.vue
â”‚   â”‚   â”‚   â””â”€â”€ main.ts
â”‚   â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â”‚   â”œâ”€â”€ manifest.json     # PWA manifest
â”‚   â”‚   â”‚   â””â”€â”€ sw.js             # Service worker
â”‚   â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ admin/                    # Backoffice portal
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Organizations.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Plans.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FeatureFlags.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Analytics.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”‚   â”œâ”€â”€ router/
â”‚   â”‚   â”‚   â””â”€â”€ main.ts
â”‚   â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ api/                      # Express API
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ routes/
â”‚       â”‚   â”‚   â”œâ”€â”€ auth.routes.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ items.routes.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ admin.routes.ts
â”‚       â”‚   â”‚   â””â”€â”€ webhooks.routes.ts
â”‚       â”‚   â”œâ”€â”€ middleware/
â”‚       â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ orgContext.ts
â”‚       â”‚   â”‚   â””â”€â”€ rateLimit.ts
â”‚       â”‚   â”œâ”€â”€ services/
â”‚       â”‚   â”‚   â”œâ”€â”€ items.service.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ inventory.service.ts
â”‚       â”‚   â”‚   â””â”€â”€ webhooks.service.ts
â”‚       â”‚   â”œâ”€â”€ controllers/
â”‚       â”‚   â”œâ”€â”€ utils/
â”‚       â”‚   â”œâ”€â”€ app.ts
â”‚       â”‚   â””â”€â”€ server.ts
â”‚       â”œâ”€â”€ tests/
â”‚       â”‚   â”œâ”€â”€ integration/
â”‚       â”‚   â”‚   â”œâ”€â”€ items.test.ts
â”‚       â”‚   â”‚   â””â”€â”€ auth.test.ts
â”‚       â”‚   â””â”€â”€ unit/
â”‚       â”‚       â””â”€â”€ services/
â”‚       â”œâ”€â”€ prisma/
â”‚       â”‚   â”œâ”€â”€ schema.prisma
â”‚       â”‚   â””â”€â”€ migrations/
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ shared/                   # Shared code
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ types/            # TypeScript types
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ item.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ api.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ utils/            # Shared utilities
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ validation.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ formatters.ts
â”‚   â”‚   â”‚   â””â”€â”€ constants/
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ ui/                       # Shared UI components
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ components/
â”‚       â”‚   â”‚   â”œâ”€â”€ Button.vue
â”‚       â”‚   â”‚   â””â”€â”€ Input.vue
â”‚       â”‚   â””â”€â”€ composables/
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ pnpm-workspace.yaml
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ vitest.config.ts              # Shared test config
</code>
                    </div>
                    
                    <h3>Monitoring & Analytics</h3>
                    <div class="tech-stack">
                        <div class="tech-card">
                            <h4>Sentry</h4>
                            <div class="label">ERROR TRACKING</div>
                            <ul>
                                <li>Real-time error alerts</li>
                                <li>Stack traces</li>
                                <li>User context</li>
                                <li>Performance monitoring</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>PostHog</h4>
                            <div class="label">ANALYTICS</div>
                            <ul>
                                <li>Open-source analytics</li>
                                <li>Event tracking</li>
                                <li>Feature flags</li>
                                <li>Session replay</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Better Stack</h4>
                            <div class="label">LOGGING</div>
                            <ul>
                                <li>Centralized logs</li>
                                <li>Uptime monitoring</li>
                                <li>Incident management</li>
                                <li>Great free tier</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="success">
                        <strong>Stack Philosophy:</strong> Use managed services to avoid DevOps overhead. Pay for auth, database, hosting so you can focus on building features. Your competitive advantage is NOT your infrastructure.
                    </div>
                    
                    <h3>Webhook Implementation</h3>
                    <div class="code-block">
<code>// apps/api/src/services/webhooks.service.ts
import Bull from 'bull';
import crypto from 'crypto';
import { prisma } from '../lib/prisma';

const webhookQueue = new Bull('webhooks', {
  redis: process.env.REDIS_URL
});

export class WebhooksService {
  async registerWebhook(orgId: string, data: RegisterWebhookDto) {
    return await prisma.webhook.create({
      data: {
        orgId,
        url: data.url,
        events: data.events,
        secret: crypto.randomBytes(32).toString('hex'),
        isActive: true
      }
    });
  }
  
  async triggerWebhook(orgId: string, event: string, payload: any) {
    // Find all active webhooks for this org subscribed to this event
    const webhooks = await prisma.webhook.findMany({
      where: {
        orgId,
        isActive: true,
        events: {
          has: event
        }
      }
    });
    
    // Queue webhook deliveries
    for (const webhook of webhooks) {
      await webhookQueue.add({
        webhookId: webhook.id,
        url: webhook.url,
        event,
        payload,
        signature: this.generateSignature(webhook.secret, payload)
      });
    }
  }
  
  private generateSignature(secret: string, payload: any): string {
    return crypto
      .createHmac('sha256', secret)
      .update(JSON.stringify(payload))
      .digest('hex');
  }
}

// Webhook queue processor
webhookQueue.process(async (job) => {
  const { webhookId, url, event, payload, signature } = job.data;
  
  try {
    const response = await fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'X-Webhook-Signature': signature,
        'X-Webhook-Event': event
      },
      body: JSON.stringify(payload)
    });
    
    if (!response.ok) {
      throw new Error(`Webhook delivery failed: ${response.status}`);
    }
    
    // Log successful delivery
    await prisma.webhookDelivery.create({
      data: {
        webhookId,
        event,
        payload,
        status: 'success',
        responseCode: response.status
      }
    });
  } catch (error) {
    // Log failed delivery
    await prisma.webhookDelivery.create({
      data: {
        webhookId,
        event,
        payload,
        status: 'failed',
        error: error.message
      }
    });
    
    throw error; // Bull will retry
  }
});</code>
                    </div>
                    
                    <h3>Admin Dashboard Views</h3>
                    <div class="code-block">
<code>// apps/admin/src/views/Organizations.vue
<script setup lang="ts">
import { ref } from 'vue';
import { useQuery, useMutation } from '@tanstack/vue-query';
import { 
  NDataTable, 
  NButton, 
  NTag, 
  NSelect,
  NModal,
  NForm,
  NFormItem 
} from 'naive-ui';
import { adminApi } from '@/lib/api';

const columns = [
  { title: 'Name', key: 'name' },
  { title: 'Plan', key: 'plan' },
  { 
    title: 'Status', 
    key: 'subscriptionStatus',
    render: (row) => (
      <NTag type={row.subscriptionStatus === 'active' ? 'success' : 'error'}>
        {row.subscriptionStatus}
      </NTag>
    )
  },
  { title: 'Items', key: 'itemCount' },
  { title: 'Users', key: 'userCount' },
  { title: 'MRR', key: 'mrr', render: (row) => `$${row.mrr}` },
  { 
    title: 'Actions', 
    key: 'actions',
    render: (row) => (
      <NButton size="small" onClick={() => editOrg(row)}>Edit</NButton>
    )
  }
];

const { data: orgs, isLoading } = useQuery({
  queryKey: ['admin', 'organizations'],
  queryFn: () => adminApi.get('/admin/organizations')
});

const showEditModal = ref(false);
const selectedOrg = ref(null);

const editOrg = (org) => {
  selectedOrg.value = org;
  showEditModal.value = true;
};
</script>

<template>
  <div class="organizations-view">
    <h1>Organizations</h1>
    
    <n-data-table
      :columns="columns"
      :data="orgs?.data"
      :loading="isLoading"
      :pagination="{ pageSize: 50 }"
    />
  </div>
</template>

// apps/admin/src/views/FeatureFlags.vue
<script setup lang="ts">
import { ref } from 'vue';
import { useQuery, useMutation, useQueryClient } from '@tanstack/vue-query';
import { 
  NCard, 
  NSwitch, 
  NSlider, 
  NButton, 
  NSpace,
  NText
} from 'naive-ui';
import { adminApi } from '@/lib/api';

const queryClient = useQueryClient();

const { data: flags } = useQuery({
  queryKey: ['admin', 'feature-flags'],
  queryFn: () => adminApi.get('/admin/feature-flags')
});

const updateRollout = useMutation({
  mutationFn: ({ flagId, percentage }) =>
    adminApi.put(`/admin/feature-flags/${flagId}/rollout`, { 
      rolloutPercentage: percentage 
    }),
  onSuccess: () => {
    queryClient.invalidateQueries({ queryKey: ['admin', 'feature-flags'] });
  }
});
</script>

<template>
  <div class="feature-flags-view">
    <h1>Feature Flags</h1>
    
    <n-space vertical :size="16">
      <n-card v-for="flag in flags?.data" :key="flag.id">
        <template #header>
          <div style="display: flex; justify-content: space-between;">
            <n-text strong>{{ flag.displayName }}</n-text>
            <n-switch :value="flag.isGlobal" disabled />
          </div>
        </template>
        
        <n-text depth="3">{{ flag.description }}</n-text>
        
        <div style="margin-top: 16px;">
          <n-text>Rollout: {{ flag.rolloutPercentage }}%</n-text>
          <n-slider
            v-model:value="flag.rolloutPercentage"
            :step="5"
            :min="0"
            :max="100"
            @update:value="(val) => updateRollout.mutate({ 
              flagId: flag.id, 
              percentage: val 
            })"
          />
        </div>
        
        <template #action>
          <n-button>Manage Overrides</n-button>
        </template>
      </n-card>
    </n-space>
  </div>
</template></code>
                    </div>
                </div>
            </div>
            
            <!-- Tab 3: TDD Workflow -->
            <div class="tab-content">
                <div class="section">
                    <h2>ğŸ§ª Test-Driven Development Workflow</h2>
                    
                    <h3>TDD Philosophy</h3>
                    <p>Write tests first, then implement features. Red â†’ Green â†’ Refactor cycle ensures code quality and catches regressions early.</p>
                    
                    <div class="info">
                        <strong>TDD Benefits:</strong><br>
                        âœ“ Better code design (testable = well-structured)<br>
                        âœ“ Living documentation through tests<br>
                        âœ“ Confidence in refactoring<br>
                        âœ“ Catches bugs before production<br>
                        âœ“ Faster debugging (pinpoint failures)
                    </div>
                    
                    <h3>Test Configuration</h3>
                    <div class="code-block">
<code>// vitest.config.ts (root)
import { defineConfig } from 'vitest/config';
import vue from '@vitejs/plugin-vue';

export default defineConfig({
  plugins: [vue()],
  test: {
    globals: true,
    environment: 'jsdom',
    setupFiles: ['./tests/setup.ts'],
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html'],
      exclude: [
        'node_modules/',
        'tests/',
        '**/*.spec.ts',
        '**/*.test.ts',
        '**/types/**'
      ],
      thresholds: {
        statements: 80,
        branches: 75,
        functions: 80,
        lines: 80
      }
    }
  }
});

// tests/setup.ts
import { config } from '@vue/test-utils';
import { vi } from 'vitest';

// Mock global objects
global.fetch = vi.fn();

// Configure Vue Test Utils
config.global.stubs = {
  teleport: true,
};

// Reset mocks between tests
beforeEach(() => {
  vi.clearAllMocks();
});</code>
                    </div>
                    
                    <h3>TDD Workflow Example: Item Service</h3>
                    
                    <h4>Step 1: Write Failing Test First (RED)</h4>
                    <div class="code-block">
<code>// apps/api/tests/unit/services/items.service.test.ts
import { describe, it, expect, beforeEach, vi } from 'vitest';
import { ItemsService } from '../../../src/services/items.service';
import { prisma } from '../../../src/lib/prisma';

vi.mock('../../../src/lib/prisma', () => ({
  prisma: {
    item: {
      create: vi.fn(),
      findMany: vi.fn(),
      findUnique: vi.fn(),
      update: vi.fn(),
    },
    alert: {
      create: vi.fn(),
    }
  }
}));

describe('ItemsService', () => {
  let itemsService: ItemsService;
  
  beforeEach(() => {
    itemsService = new ItemsService();
    vi.clearAllMocks();
  });
  
  describe('createItem', () => {
    it('should create item and trigger low stock alert if below reorder level', async () => {
      // Arrange
      const orgId = 'org-123';
      const itemData = {
        sku: 'ITEM-001',
        name: 'Test Item',
        quantity: 5,
        reorderLevel: 10,
      };
      
      const expectedItem = {
        id: 'item-123',
        orgId,
        ...itemData,
        createdAt: new Date(),
        updatedAt: new Date(),
      };
      
      vi.mocked(prisma.item.create).mockResolvedValue(expectedItem);
      
      // Act
      const result = await itemsService.createItem(orgId, itemData);
      
      // Assert
      expect(result).toEqual(expectedItem);
      expect(prisma.item.create).toHaveBeenCalledWith({
        data: { orgId, ...itemData }
      });
      
      // Should create alert since quantity (5) < reorderLevel (10)
      expect(prisma.alert.create).toHaveBeenCalledWith({
        data: {
          orgId,
          itemId: expectedItem.id,
          alertType: 'low_stock',
          message: expect.stringContaining('Test Item')
        }
      });
    });
    
    it('should not create alert if stock is above reorder level', async () => {
      // Arrange
      const itemData = {
        sku: 'ITEM-002',
        name: 'Well Stocked Item',
        quantity: 50,
        reorderLevel: 10,
      };
      
      vi.mocked(prisma.item.create).mockResolvedValue({
        id: 'item-456',
        orgId: 'org-123',
        ...itemData,
      });
      
      // Act
      await itemsService.createItem('org-123', itemData);
      
      // Assert
      expect(prisma.alert.create).not.toHaveBeenCalled();
    });
  });
});</code>
                    </div>
                    
                    <h4>Step 2: Implement Feature (GREEN)</h4>
                    <div class="code-block">
<code>// apps/api/src/services/items.service.ts
import { prisma } from '../lib/prisma';

export class ItemsService {
  async createItem(orgId: string, data: CreateItemDto) {
    // Create item
    const item = await prisma.item.create({
      data: {
        orgId,
        ...data,
      }
    });
    
    // Check if low stock alert needed
    if (item.quantity <= item.reorderLevel) {
      await prisma.alert.create({
        data: {
          orgId,
          itemId: item.id,
          alertType: 'low_stock',
          message: `${item.name} is low on stock (${item.quantity} remaining)`
        }
      });
    }
    
    return item;
  }
}

// Run tests: npm test
// âœ“ should create item and trigger low stock alert if below reorder level
// âœ“ should not create alert if stock is above reorder level</code>
                    </div>
                    
                    <h4>Step 3: Refactor (if needed)</h4>
                    <div class="code-block">
<code>// Extract alert logic for reusability
export class ItemsService {
  async createItem(orgId: string, data: CreateItemDto) {
    const item = await prisma.item.create({
      data: { orgId, ...data }
    });
    
    await this.checkAndCreateLowStockAlert(item);
    
    return item;
  }
  
  private async checkAndCreateLowStockAlert(item: Item) {
    if (item.quantity <= item.reorderLevel) {
      await prisma.alert.create({
        data: {
          orgId: item.orgId,
          itemId: item.id,
          alertType: 'low_stock',
          message: this.getLowStockMessage(item)
        }
      });
    }
  }
  
  private getLowStockMessage(item: Item): string {
    return `${item.name} is low on stock (${item.quantity} remaining)`;
  }
}

// Tests still pass after refactor! âœ“</code>
                    </div>
                    
                    <h3>Component Testing Example</h3>
                    <div class="code-block">
<code>// apps/app/src/components/__tests__/ItemForm.spec.ts
import { describe, it, expect, vi } from 'vitest';
import { mount } from '@vue/test-utils';
import { createPinia, setActivePinia } from 'pinia';
import ItemForm from '../ItemForm.vue';

describe('ItemForm', () => {
  beforeEach(() => {
    setActivePinia(createPinia());
  });
  
  it('should render form fields', () => {
    const wrapper = mount(ItemForm);
    
    expect(wrapper.find('input[name="sku"]').exists()).toBe(true);
    expect(wrapper.find('input[name="name"]').exists()).toBe(true);
    expect(wrapper.find('input[name="quantity"]').exists()).toBe(true);
  });
  
  it('should validate required fields', async () => {
    const wrapper = mount(ItemForm);
    
    // Try to submit without filling required fields
    await wrapper.find('form').trigger('submit.prevent');
    
    // Should show validation errors
    expect(wrapper.find('.error-message').text()).toContain('Name is required');
  });
  
  it('should emit save event with form data', async () => {
    const wrapper = mount(ItemForm);
    
    // Fill form
    await wrapper.find('input[name="sku"]').setValue('ITEM-001');
    await wrapper.find('input[name="name"]').setValue('Test Item');
    await wrapper.find('input[name="quantity"]').setValue('10');
    
    // Submit form
    await wrapper.find('form').trigger('submit.prevent');
    
    // Should emit save event with data
    expect(wrapper.emitted('save')).toBeTruthy();
    expect(wrapper.emitted('save')[0]).toEqual([{
      sku: 'ITEM-001',
      name: 'Test Item',
      quantity: 10
    }]);
  });
  
  it('should show loading state while saving', async () => {
    const wrapper = mount(ItemForm, {
      props: {
        loading: true
      }
    });
    
    const submitButton = wrapper.find('button[type="submit"]');
    expect(submitButton.attributes('disabled')).toBeDefined();
    expect(submitButton.text()).toContain('Saving...');
  });
});</code>
                    </div>
                    
                    <h3>API Integration Testing</h3>
                    <div class="code-block">
<code>// apps/api/tests/integration/items.test.ts
import { describe, it, expect, beforeAll, afterAll } from 'vitest';
import request from 'supertest';
import { app } from '../../src/app';
import { prisma } from '../../src/lib/prisma';

describe('Items API', () => {
  let authToken: string;
  let orgId: string;
  
  beforeAll(async () => {
    // Create test org and user
    const org = await prisma.organization.create({
      data: { name: 'Test Org', slug: 'test-org' }
    });
    orgId = org.id;
    
    // Login and get token
    const response = await request(app)
      .post('/api/auth/login')
      .send({ email: 'test@example.com', password: 'password' });
    
    authToken = response.body.token;
  });
  
  afterAll(async () => {
    // Clean up test data
    await prisma.item.deleteMany({ where: { orgId } });
    await prisma.organization.delete({ where: { id: orgId } });
  });
  
  describe('POST /api/items', () => {
    it('should create new item', async () => {
      const response = await request(app)
        .post('/api/items')
        .set('Authorization', `Bearer ${authToken}`)
        .send({
          sku: 'TEST-001',
          name: 'Test Item',
          quantity: 100,
          reorderLevel: 20
        })
        .expect(201);
      
      expect(response.body).toMatchObject({
        sku: 'TEST-001',
        name: 'Test Item',
        quantity: 100
      });
    });
    
    it('should return 400 for invalid data', async () => {
      const response = await request(app)
        .post('/api/items')
        .set('Authorization', `Bearer ${authToken}`)
        .send({ name: 'Missing SKU' })  // SKU is required
        .expect(400);
      
      expect(response.body.error).toBeDefined();
    });
    
    it('should return 401 without auth token', async () => {
      await request(app)
        .post('/api/items')
        .send({ sku: 'TEST-002', name: 'Test' })
        .expect(401);
    });
  });
  
  describe('GET /api/items', () => {
    it('should return paginated items', async () => {
      // Create test items
      await prisma.item.createMany({
        data: [
          { orgId, sku: 'A-001', name: 'Item A', quantity: 10 },
          { orgId, sku: 'B-001', name: 'Item B', quantity: 20 },
        ]
      });
      
      const response = await request(app)
        .get('/api/items?page=1&limit=10')
        .set('Authorization', `Bearer ${authToken}`)
        .expect(200);
      
      expect(response.body.data).toHaveLength(2);
      expect(response.body.pagination).toMatchObject({
        page: 1,
        limit: 10,
        total: 2
      });
    });
    
    it('should filter by search query', async () => {
      const response = await request(app)
        .get('/api/items?search=Item A')
        .set('Authorization', `Bearer ${authToken}`)
        .expect(200);
      
      expect(response.body.data).toHaveLength(1);
      expect(response.body.data[0].name).toBe('Item A');
    });
  });
});</code>
                    </div>
                    
                    <h3>E2E Testing with Playwright</h3>
                    <div class="code-block">
<code>// apps/app/tests/e2e/inventory.spec.ts
import { test, expect } from '@playwright/test';

test.describe('Inventory Management', () => {
  test.beforeEach(async ({ page }) => {
    // Login
    await page.goto('/login');
    await page.fill('input[name="email"]', 'test@example.com');
    await page.fill('input[name="password"]', 'password');
    await page.click('button[type="submit"]');
    
    // Wait for dashboard
    await page.waitForURL('/dashboard');
  });
  
  test('should create new item', async ({ page }) => {
    // Navigate to items page
    await page.click('a[href="/items"]');
    
    // Click add item button
    await page.click('button:has-text("Add Item")');
    
    // Fill form
    await page.fill('input[name="sku"]', 'E2E-001');
    await page.fill('input[name="name"]', 'E2E Test Item');
    await page.fill('input[name="quantity"]', '100');
    await page.fill('input[name="reorderLevel"]', '20');
    
    // Submit form
    await page.click('button:has-text("Save")');
    
    // Should show success message
    await expect(page.locator('.success-message')).toContainText('Item created');
    
    // Should appear in list
    await expect(page.locator('table')).toContainText('E2E-001');
    await expect(page.locator('table')).toContainText('E2E Test Item');
  });
  
  test('should scan barcode and find item', async ({ page }) => {
    // Navigate to items
    await page.goto('/items');
    
    // Click barcode scanner
    await page.click('button:has-text("Scan Barcode")');
    
    // Mock barcode scan result
    await page.evaluate(() => {
      window.dispatchEvent(new CustomEvent('barcode-scanned', {
        detail: { barcode: '1234567890123' }
      }));
    });
    
    // Should navigate to item detail
    await expect(page).toHaveURL(/\/items\/[a-f0-9-]+/);
    await expect(page.locator('h1')).toContainText('Item Details');
  });
  
  test('should work offline', async ({ page, context }) => {
    // Go to items page while online
    await page.goto('/items');
    await page.waitForLoadState('networkidle');
    
    // Go offline
    await context.setOffline(true);
    
    // Should still render cached items
    await page.reload();
    await expect(page.locator('table')).toBeVisible();
    
    // Should show offline indicator
    await expect(page.locator('.offline-badge')).toBeVisible();
  });
});</code>
                    </div>
                    
                    <h3>Test Coverage Goals</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Layer</th>
                                <th>Coverage Target</th>
                                <th>Focus Areas</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Services/Business Logic</td>
                                <td>90%+</td>
                                <td>Core inventory logic, calculations, edge cases</td>
                            </tr>
                            <tr>
                                <td>API Endpoints</td>
                                <td>80%+</td>
                                <td>All CRUD operations, auth, validation</td>
                            </tr>
                            <tr>
                                <td>Vue Components</td>
                                <td>70%+</td>
                                <td>User interactions, state changes, events</td>
                            </tr>
                            <tr>
                                <td>E2E Critical Paths</td>
                                <td>100%</td>
                                <td>Login, create item, adjust inventory, view reports</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <h3>Running Tests</h3>
                    <div class="code-block">
<code># Run all tests
pnpm test

# Run tests in watch mode (TDD)
pnpm test:watch

# Run specific test file
pnpm test src/services/items.service.test.ts

# Run with coverage
pnpm test:coverage

# Run E2E tests
pnpm test:e2e

# Run E2E in UI mode
pnpm test:e2e:ui

# Type check + lint + test (CI pipeline)
pnpm ci</code>
                    </div>
                    
                    <h3>TDD Best Practices</h3>
                    <ul class="feature-list">
                        <li>
                            <span class="priority-badge priority-mvp">RULE</span>
                            <div class="feature-content">
                                <div class="feature-title">Write Test First, Always</div>
                                <div class="feature-desc">No production code without a failing test. This ensures every line is intentional and testable.</div>
                            </div>
                        </li>
                        
                        <li>
                            <span class="priority-badge priority-mvp">RULE</span>
                            <div class="feature-content">
                                <div class="feature-title">One Assertion Per Test (mostly)</div>
                                <div class="feature-desc">Each test should verify one behavior. Makes failures easy to diagnose.</div>
                            </div>
                        </li>
                        
                        <li>
                            <span class="priority-badge priority-mvp">RULE</span>
                            <div class="feature-content">
                                <div class="feature-title">Arrange-Act-Assert Pattern</div>
                                <div class="feature-desc">Structure tests clearly: Set up data (Arrange), Execute action (Act), Verify result (Assert).</div>
                            </div>
                        </li>
                        
                        <li>
                            <span class="priority-badge priority-mvp">RULE</span>
                            <div class="feature-content">
                                <div class="feature-title">Mock External Dependencies</div>
                                <div class="feature-desc">Unit tests should be fast and isolated. Mock database, API calls, file system.</div>
                            </div>
                        </li>
                        
                        <li>
                            <span class="priority-badge priority-mvp">RULE</span>
                            <div class="feature-content">
                                <div class="feature-title">Test Edge Cases & Errors</div>
                                <div class="feature-desc">Don't just test happy path. Test validation failures, empty states, boundary conditions.</div>
                            </div>
                        </li>
                    </ul>
                    
                    <div class="success">
                        <strong>TDD Mindset:</strong> Tests are not a choreâ€”they're your safety net. They let you refactor fearlessly, catch bugs early, and ship with confidence. Embrace the red-green-refactor cycle!
                    </div>
                </div>
            </div>
            
            <!-- Tab 4: Database Schema -->
            <div class="tab-content">
                <div class="section">
                    <h2>ğŸ—„ï¸ Database Schema Design</h2>
                    
                    <h3>Core Tables</h3>
                    
                    <div class="code-block">
<code>-- Organizations (Multi-tenant support)
CREATE TABLE organizations (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(255) NOT NULL,
  slug VARCHAR(100) UNIQUE NOT NULL,
  plan VARCHAR(50) DEFAULT 'free', -- free, basic, pro, enterprise
  subscription_status VARCHAR(50) DEFAULT 'active',
  stripe_customer_id VARCHAR(255),
  stripe_subscription_id VARCHAR(255),
  max_items INTEGER DEFAULT 50,
  max_users INTEGER DEFAULT 3,
  settings JSONB DEFAULT '{}',
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_org_slug ON organizations(slug);
CREATE INDEX idx_org_stripe ON organizations(stripe_customer_id);

-- Plans (for admin portal management)
CREATE TABLE plans (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(100) NOT NULL UNIQUE, -- free, basic, pro, enterprise
  display_name VARCHAR(255) NOT NULL,
  description TEXT,
  price_monthly DECIMAL(10, 2),
  price_yearly DECIMAL(10, 2),
  max_items INTEGER,
  max_users INTEGER,
  features JSONB DEFAULT '[]', -- ["barcode_scanner", "api_access", "webhooks"]
  is_active BOOLEAN DEFAULT TRUE,
  sort_order INTEGER DEFAULT 0,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Feature Flags (for admin portal)
CREATE TABLE feature_flags (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(100) NOT NULL UNIQUE, -- barcode_scanner, offline_mode, webhooks
  display_name VARCHAR(255) NOT NULL,
  description TEXT,
  is_global BOOLEAN DEFAULT FALSE, -- if true, applies to all orgs
  enabled_by_default BOOLEAN DEFAULT FALSE,
  rollout_percentage INTEGER DEFAULT 0, -- 0-100 for gradual rollout
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Organization Feature Flags (per-org overrides)
CREATE TABLE org_feature_flags (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  org_id UUID REFERENCES organizations(id) ON DELETE CASCADE,
  feature_flag_id UUID REFERENCES feature_flags(id) ON DELETE CASCADE,
  is_enabled BOOLEAN NOT NULL,
  enabled_at TIMESTAMPTZ,
  enabled_by UUID REFERENCES users(id), -- admin who enabled it
  notes TEXT,
  UNIQUE(org_id, feature_flag_id)
);

CREATE INDEX idx_org_features ON org_feature_flags(org_id);
CREATE INDEX idx_feature_orgs ON org_feature_flags(feature_flag_id);

-- Users
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  email VARCHAR(255) UNIQUE NOT NULL,
  password_hash VARCHAR(255), -- nullable for OAuth
  name VARCHAR(255),
  avatar_url TEXT,
  email_verified BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_user_email ON users(email);

-- Organization Members (Many-to-many with roles)
CREATE TABLE org_members (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  org_id UUID REFERENCES organizations(id) ON DELETE CASCADE,
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  role VARCHAR(50) DEFAULT 'member', -- owner, admin, member, viewer
  invited_by UUID REFERENCES users(id),
  joined_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(org_id, user_id)
);

CREATE INDEX idx_org_members_org ON org_members(org_id);
CREATE INDEX idx_org_members_user ON org_members(user_id);

-- Categories
CREATE TABLE categories (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  org_id UUID REFERENCES organizations(id) ON DELETE CASCADE,
  name VARCHAR(255) NOT NULL,
  description TEXT,
  color VARCHAR(7), -- hex color for UI
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(org_id, name)
);

CREATE INDEX idx_categories_org ON categories(org_id);

-- Suppliers
CREATE TABLE suppliers (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  org_id UUID REFERENCES organizations(id) ON DELETE CASCADE,
  name VARCHAR(255) NOT NULL,
  contact_name VARCHAR(255),
  email VARCHAR(255),
  phone VARCHAR(50),
  address TEXT,
  notes TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_suppliers_org ON suppliers(org_id);

-- Items (Core inventory)
CREATE TABLE items (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  org_id UUID REFERENCES organizations(id) ON DELETE CASCADE,
  sku VARCHAR(100) NOT NULL,
  name VARCHAR(255) NOT NULL,
  description TEXT,
  category_id UUID REFERENCES categories(id) ON DELETE SET NULL,
  supplier_id UUID REFERENCES suppliers(id) ON DELETE SET NULL,
  
  -- Inventory tracking
  quantity INTEGER DEFAULT 0 CHECK (quantity >= 0),
  reorder_level INTEGER DEFAULT 10,
  reorder_quantity INTEGER DEFAULT 50,
  unit VARCHAR(50) DEFAULT 'units', -- units, kg, liters, boxes, etc.
  
  -- Pricing
  cost_price DECIMAL(10, 2),
  selling_price DECIMAL(10, 2),
  currency VARCHAR(3) DEFAULT 'USD',
  
  -- Media
  image_url TEXT,
  images JSONB DEFAULT '[]', -- array of image URLs
  
  -- Metadata
  barcode VARCHAR(255),
  location VARCHAR(255), -- warehouse location, shelf, etc.
  custom_fields JSONB DEFAULT '{}',
  
  -- Status
  status VARCHAR(50) DEFAULT 'active', -- active, archived, discontinued
  
  -- Timestamps
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  
  UNIQUE(org_id, sku)
);

CREATE INDEX idx_items_org ON items(org_id);
CREATE INDEX idx_items_sku ON items(org_id, sku);
CREATE INDEX idx_items_category ON items(category_id);
CREATE INDEX idx_items_supplier ON items(supplier_id);
CREATE INDEX idx_items_status ON items(status);
CREATE INDEX idx_items_low_stock ON items(org_id, quantity) WHERE quantity <= reorder_level;
CREATE INDEX idx_items_search ON items USING gin(to_tsvector('english', name || ' ' || COALESCE(description, '')));

-- Inventory Movements (Transaction log)
CREATE TABLE inventory_movements (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  org_id UUID REFERENCES organizations(id) ON DELETE CASCADE,
  item_id UUID REFERENCES items(id) ON DELETE CASCADE,
  user_id UUID REFERENCES users(id) ON DELETE SET NULL,
  
  movement_type VARCHAR(50) NOT NULL, -- stock_in, stock_out, adjustment, sale, return, loss
  quantity INTEGER NOT NULL, -- positive for in, negative for out
  quantity_before INTEGER NOT NULL,
  quantity_after INTEGER NOT NULL,
  
  reference_id VARCHAR(255), -- PO number, invoice number, etc.
  notes TEXT,
  metadata JSONB DEFAULT '{}',
  
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_movements_org ON inventory_movements(org_id);
CREATE INDEX idx_movements_item ON inventory_movements(item_id);
CREATE INDEX idx_movements_type ON inventory_movements(movement_type);
CREATE INDEX idx_movements_date ON inventory_movements(created_at DESC);

-- Low Stock Alerts
CREATE TABLE alerts (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  org_id UUID REFERENCES organizations(id) ON DELETE CASCADE,
  item_id UUID REFERENCES items(id) ON DELETE CASCADE,
  alert_type VARCHAR(50) NOT NULL, -- low_stock, out_of_stock, reorder_point
  message TEXT NOT NULL,
  is_read BOOLEAN DEFAULT FALSE,
  is_resolved BOOLEAN DEFAULT FALSE,
  resolved_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_alerts_org ON alerts(org_id);
CREATE INDEX idx_alerts_unread ON alerts(org_id, is_read) WHERE is_read = FALSE;

-- Row Level Security (RLS) for Postgres
ALTER TABLE organizations ENABLE ROW LEVEL SECURITY;
ALTER TABLE items ENABLE ROW LEVEL SECURITY;
ALTER TABLE inventory_movements ENABLE ROW LEVEL SECURITY;
ALTER TABLE categories ENABLE ROW LEVEL SECURITY;
ALTER TABLE suppliers ENABLE ROW LEVEL SECURITY;
ALTER TABLE alerts ENABLE ROW LEVEL SECURITY;

-- Example RLS Policy
CREATE POLICY org_isolation ON items
  USING (org_id = current_setting('app.current_org_id')::UUID);</code>
                    </div>
                    
                    <h3>Prisma Schema Example</h3>
                    <div class="code-block">
<code>// schema.prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Organization {
  id                  String   @id @default(uuid())
  name                String
  slug                String   @unique
  plan                String   @default("free")
  subscriptionStatus  String   @default("active") @map("subscription_status")
  stripeCustomerId    String?  @map("stripe_customer_id")
  stripeSubscriptionId String? @map("stripe_subscription_id")
  maxItems            Int      @default(50) @map("max_items")
  maxUsers            Int      @default(3) @map("max_users")
  settings            Json     @default("{}")
  createdAt           DateTime @default(now()) @map("created_at")
  updatedAt           DateTime @updatedAt @map("updated_at")

  members             OrgMember[]
  items               Item[]
  categories          Category[]
  suppliers           Supplier[]
  movements           InventoryMovement[]
  alerts              Alert[]
  featureFlags        OrgFeatureFlag[]

  @@map("organizations")
}

model Plan {
  id            String   @id @default(uuid())
  name          String   @unique // free, basic, pro, enterprise
  displayName   String   @map("display_name")
  description   String?
  priceMonthly  Decimal? @map("price_monthly")
  priceYearly   Decimal? @map("price_yearly")
  maxItems      Int?     @map("max_items")
  maxUsers      Int?     @map("max_users")
  features      Json     @default("[]")
  isActive      Boolean  @default(true) @map("is_active")
  sortOrder     Int      @default(0) @map("sort_order")
  createdAt     DateTime @default(now()) @map("created_at")
  updatedAt     DateTime @updatedAt @map("updated_at")

  @@map("plans")
}

model FeatureFlag {
  id                String   @id @default(uuid())
  name              String   @unique
  displayName       String   @map("display_name")
  description       String?
  isGlobal          Boolean  @default(false) @map("is_global")
  enabledByDefault  Boolean  @default(false) @map("enabled_by_default")
  rolloutPercentage Int      @default(0) @map("rollout_percentage")
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")

  orgOverrides      OrgFeatureFlag[]

  @@map("feature_flags")
}

model OrgFeatureFlag {
  id            String    @id @default(uuid())
  orgId         String    @map("org_id")
  featureFlagId String    @map("feature_flag_id")
  isEnabled     Boolean   @map("is_enabled")
  enabledAt     DateTime? @map("enabled_at")
  enabledBy     String?   @map("enabled_by")
  notes         String?

  organization  Organization @relation(fields: [orgId], references: [id], onDelete: Cascade)
  featureFlag   FeatureFlag  @relation(fields: [featureFlagId], references: [id], onDelete: Cascade)
  admin         User?        @relation(fields: [enabledBy], references: [id])

  @@unique([orgId, featureFlagId])
  @@index([orgId])
  @@index([featureFlagId])
  @@map("org_feature_flags")
}

model User {
  id             String    @id @default(uuid())
  email          String    @unique
  passwordHash   String?   @map("password_hash")
  name           String?
  avatarUrl      String?   @map("avatar_url")
  emailVerified  Boolean   @default(false) @map("email_verified")
  createdAt      DateTime  @default(now()) @map("created_at")
  updatedAt      DateTime  @updatedAt @map("updated_at")

  memberships    OrgMember[]
  movements      InventoryMovement[]

  @@map("users")
}

model Item {
  id              String    @id @default(uuid())
  orgId           String    @map("org_id")
  sku             String
  name            String
  description     String?
  categoryId      String?   @map("category_id")
  supplierId      String?   @map("supplier_id")
  quantity        Int       @default(0)
  reorderLevel    Int       @default(10) @map("reorder_level")
  reorderQuantity Int       @default(50) @map("reorder_quantity")
  unit            String    @default("units")
  costPrice       Decimal?  @map("cost_price")
  sellingPrice    Decimal?  @map("selling_price")
  currency        String    @default("USD")
  imageUrl        String?   @map("image_url")
  images          Json      @default("[]")
  barcode         String?
  location        String?
  customFields    Json      @default("{}") @map("custom_fields")
  status          String    @default("active")
  createdAt       DateTime  @default(now()) @map("created_at")
  updatedAt       DateTime  @updatedAt @map("updated_at")

  organization    Organization @relation(fields: [orgId], references: [id], onDelete: Cascade)
  category        Category?    @relation(fields: [categoryId], references: [id])
  supplier        Supplier?    @relation(fields: [supplierId], references: [id])
  movements       InventoryMovement[]
  alerts          Alert[]

  @@unique([orgId, sku])
  @@index([orgId])
  @@index([categoryId])
  @@index([supplierId])
  @@map("items")
}</code>
                    </div>
                    
                    <div class="warning">
                        <strong>Critical:</strong> Always include org_id in every query. Use middleware to enforce tenant isolation. Never trust client-side org_id - always validate from session.
                    </div>
                </div>
            </div>
            
            <!-- Tab 4: API Design -->
            <div class="tab-content">
                <div class="section">
                    <h2>ğŸ”Œ REST API Design</h2>
                    
                    <h3>Authentication & Authorization</h3>
                    <div class="api-endpoint">
                        <span class="method method-post">POST</span> <code>/api/auth/register</code>
                        <div class="code-block">
<code>{
  "email": "user@example.com",
  "password": "strong_password",
  "name": "John Doe"
}</code>
                        </div>
                    </div>
                    
                    <div class="api-endpoint">
                        <span class="method method-post">POST</span> <code>/api/auth/login</code>
                        <div class="code-block">
<code>{
  "email": "user@example.com",
  "password": "strong_password"
}
// Returns: JWT token + refresh token</code>
                        </div>
                    </div>
                    
                    <h3>Items API</h3>
                    
                    <div class="api-endpoint">
                        <span class="method method-get">GET</span> <code>/api/items</code>
                        <p>List all items with pagination, filtering, and search</p>
                        <div class="code-block">
<code>// Query params:
?page=1
&limit=50
&search=widget
&category=electronics
&status=active
&low_stock=true
&sort_by=name
&sort_order=asc

// Response:
{
  "data": [
    {
      "id": "uuid",
      "sku": "WDG-001",
      "name": "Super Widget",
      "quantity": 5,
      "reorderLevel": 10,
      "isLowStock": true,
      "category": { "id": "uuid", "name": "Electronics" },
      "costPrice": 10.50,
      "sellingPrice": 25.99,
      "imageUrl": "https://...",
      "updatedAt": "2024-01-15T10:30:00Z"
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 50,
    "total": 150,
    "totalPages": 3
  }
}</code>
                        </div>
                    </div>
                    
                    <div class="api-endpoint">
                        <span class="method method-get">GET</span> <code>/api/items/:id</code>
                        <p>Get single item with full details including movement history</p>
                    </div>
                    
                    <div class="api-endpoint">
                        <span class="method method-post">POST</span> <code>/api/items</code>
                        <p>Create new item</p>
                        <div class="code-block">
<code>{
  "sku": "WDG-002",
  "name": "Premium Widget",
  "description": "High quality widget",
  "categoryId": "uuid",
  "supplierId": "uuid",
  "quantity": 100,
  "reorderLevel": 20,
  "reorderQuantity": 100,
  "costPrice": 15.00,
  "sellingPrice": 35.99,
  "barcode": "1234567890123",
  "location": "Warehouse A, Shelf 3"
}</code>
                        </div>
                    </div>
                    
                    <div class="api-endpoint">
                        <span class="method method-put">PUT</span> <code>/api/items/:id</code>
                        <p>Update item (partial update supported)</p>
                    </div>
                    
                    <div class="api-endpoint">
                        <span class="method method-delete">DELETE</span> <code>/api/items/:id</code>
                        <p>Soft delete (set status to archived)</p>
                    </div>
                    
                    <h3>Inventory Movement API</h3>
                    
                    <div class="api-endpoint">
                        <span class="method method-post">POST</span> <code>/api/inventory/adjust</code>
                        <p>Adjust inventory quantity (stock in/out)</p>
                        <div class="code-block">
<code>{
  "itemId": "uuid",
  "movementType": "stock_in", // stock_in, stock_out, adjustment
  "quantity": 50,
  "notes": "Received shipment from supplier",
  "referenceId": "PO-12345"
}</code>
                        </div>
                    </div>
                    
                    <div class="api-endpoint">
                        <span class="method method-get">GET</span> <code>/api/inventory/movements</code>
                        <p>Get movement history with filters</p>
                        <div class="code-block">
<code>// Query params:
?item_id=uuid
&movement_type=stock_in
&start_date=2024-01-01
&end_date=2024-01-31
&page=1
&limit=50</code>
                        </div>
                    </div>
                    
                    <h3>Reporting API</h3>
                    
                    <div class="api-endpoint">
                        <span class="method method-get">GET</span> <code>/api/reports/dashboard</code>
                        <p>Dashboard statistics</p>
                        <div class="code-block">
<code>{
  "totalItems": 150,
  "lowStockCount": 12,
  "outOfStockCount": 3,
  "totalValue": 125430.50,
  "recentMovements": [...],
  "topMovingItems": [...],
  "categoryBreakdown": [...]
}</code>
                        </div>
                    </div>
                    
                    <div class="api-endpoint">
                        <span class="method method-get">GET</span> <code>/api/reports/inventory-value</code>
                        <p>Calculate total inventory value</p>
                    </div>
                    
                    <div class="api-endpoint">
                        <span class="method method-get">GET</span> <code>/api/reports/export</code>
                        <p>Export inventory to CSV/Excel</p>
                        <div class="code-block">
<code>// Query params:
?format=csv  // csv or xlsx
&fields=sku,name,quantity,value
&filters=...  // same as items list filters</code>
                        </div>
                    </div>
                    
                    <h3>Webhooks (Competitive Edge)</h3>
                    
                    <div class="api-endpoint">
                        <span class="method method-post">POST</span> <code>/api/webhooks</code>
                        <p>Register webhook for inventory events</p>
                        <div class="code-block">
<code>{
  "url": "https://customer-app.com/webhook",
  "events": ["item.low_stock", "item.out_of_stock", "movement.created"],
  "secret": "webhook_secret_key"
}</code>
                        </div>
                    </div>
                    
                    <h3>Admin Portal API</h3>
                    
                    <div class="warning">
                        <strong>Admin Routes:</strong> These endpoints require super admin authentication. Not accessible to regular users or org admins.
                    </div>
                    
                    <div class="api-endpoint">
                        <span class="method method-get">GET</span> <code>/api/admin/organizations</code>
                        <p>List all organizations with filtering</p>
                        <div class="code-block">
<code>// Query params:
?page=1
&limit=50
&plan=pro
&status=active
&search=company

// Response:
{
  "data": [
    {
      "id": "uuid",
      "name": "Acme Corp",
      "slug": "acme-corp",
      "plan": "pro",
      "subscriptionStatus": "active",
      "itemCount": 1250,
      "userCount": 8,
      "mrr": 49.00,
      "createdAt": "2024-01-15T10:30:00Z"
    }
  ],
  "pagination": { ... }
}</code>
                        </div>
                    </div>
                    
                    <div class="api-endpoint">
                        <span class="method method-put">PUT</span> <code>/api/admin/organizations/:id/plan</code>
                        <p>Change organization plan</p>
                        <div class="code-block">
<code>{
  "plan": "enterprise",
  "maxItems": 10000,
  "maxUsers": 50,
  "notes": "Custom enterprise deal"
}</code>
                        </div>
                    </div>
                    
                    <div class="api-endpoint">
                        <span class="method method-get">GET</span> <code>/api/admin/plans</code>
                        <p>List all pricing plans</p>
                    </div>
                    
                    <div class="api-endpoint">
                        <span class="method method-post">POST</span> <code>/api/admin/plans</code>
                        <p>Create or update pricing plan</p>
                        <div class="code-block">
<code>{
  "name": "pro",
  "displayName": "Pro Plan",
  "priceMonthly": 49.00,
  "priceYearly": 490.00,
  "maxItems": 1000,
  "maxUsers": 10,
  "features": ["barcode_scanner", "api_access", "webhooks", "multi_location"]
}</code>
                        </div>
                    </div>
                    
                    <div class="api-endpoint">
                        <span class="method method-get">GET</span> <code>/api/admin/feature-flags</code>
                        <p>List all feature flags</p>
                    </div>
                    
                    <div class="api-endpoint">
                        <span class="method method-post">POST</span> <code>/api/admin/feature-flags</code>
                        <p>Create feature flag</p>
                        <div class="code-block">
<code>{
  "name": "ai_reorder_suggestions",
  "displayName": "AI Reorder Suggestions",
  "description": "ML-powered smart reorder predictions",
  "isGlobal": false,
  "enabledByDefault": false,
  "rolloutPercentage": 0  // Gradual rollout: 0-100
}</code>
                        </div>
                    </div>
                    
                    <div class="api-endpoint">
                        <span class="method method-put">PUT</span> <code>/api/admin/feature-flags/:id/rollout</code>
                        <p>Update rollout percentage for gradual feature release</p>
                        <div class="code-block">
<code>{
  "rolloutPercentage": 25  // Release to 25% of users
}</code>
                        </div>
                    </div>
                    
                    <div class="api-endpoint">
                        <span class="method method-post">POST</span> <code>/api/admin/organizations/:orgId/features/:flagId</code>
                        <p>Enable/disable feature for specific organization</p>
                        <div class="code-block">
<code>{
  "isEnabled": true,
  "notes": "Beta tester request"
}</code>
                        </div>
                    </div>
                    
                    <div class="api-endpoint">
                        <span class="method method-get">GET</span> <code>/api/admin/analytics</code>
                        <p>Global analytics dashboard data</p>
                        <div class="code-block">
<code>{
  "totalOrganizations": 1234,
  "activeOrganizations": 1100,
  "totalUsers": 5678,
  "mrr": 45000.00,
  "arr": 540000.00,
  "churnRate": 2.5,
  "planBreakdown": {
    "free": 500,
    "basic": 400,
    "pro": 300,
    "enterprise": 34
  },
  "recentSignups": [...],
  "topFeatureUsage": [...]
}</code>
                        </div>
                    </div>
                    
                    <div class="success">
                        <strong>API Best Practices:</strong><br>
                        âœ“ Use HTTP status codes correctly (200, 201, 400, 401, 404, 500)<br>
                        âœ“ Return consistent error format: { "error": { "code": "ITEM_NOT_FOUND", "message": "..." } }<br>
                        âœ“ Version API: /api/v1/items<br>
                        âœ“ Rate limit: 100 req/min per user, 1000 req/hour per org<br>
                        âœ“ Include request ID in responses for debugging<br>
                        âœ“ Document with OpenAPI/Swagger
                    </div>
                </div>
            </div>
            
            <!-- Tab 5: Core Features -->
            <div class="tab-content">
                <div class="section">
                    <h2>âš¡ Core Feature Implementation</h2>
                    
                    <h3>MVP Features (Must Have)</h3>
                    <ul class="feature-list">
                        <li>
                            <span class="priority-badge priority-mvp">MVP</span>
                            <div class="feature-content">
                                <div class="feature-title">Authentication & Multi-Tenancy</div>
                                <div class="feature-desc">Email/password login, OAuth (Google), organization workspaces, invite team members, role-based permissions (owner, admin, member, viewer)</div>
                            </div>
                        </li>
                        
                        <li>
                            <span class="priority-badge priority-mvp">MVP</span>
                            <div class="feature-content">
                                <div class="feature-title">Item Management</div>
                                <div class="feature-desc">CRUD operations, SKU auto-generation, barcode support, image uploads (max 5 per item), categories & tags, custom fields, bulk import via CSV</div>
                            </div>
                        </li>
                        
                        <li>
                            <span class="priority-badge priority-mvp">MVP</span>
                            <div class="feature-content">
                                <div class="feature-title">Inventory Tracking</div>
                                <div class="feature-desc">Real-time quantity updates, stock in/out transactions, adjustment history with notes, automatic reorder point alerts, movement audit log</div>
                            </div>
                        </li>
                        
                        <li>
                            <span class="priority-badge priority-mvp">MVP</span>
                            <div class="feature-content">
                                <div class="feature-title">Dashboard & Analytics</div>
                                <div class="feature-desc">Total items count, inventory value calculation, low stock alerts (configurable threshold), out of stock warnings, recent activity feed, top 10 most moved items</div>
                            </div>
                        </li>
                        
                        <li>
                            <span class="priority-badge priority-mvp">MVP</span>
                            <div class="feature-content">
                                <div class="feature-title">Search & Filtering</div>
                                <div class="feature-desc">Full-text search (name, SKU, description), filter by category, supplier, status, stock level, sort by any column, saved search filters</div>
                            </div>
                        </li>
                        
                        <li>
                            <span class="priority-badge priority-mvp">MVP</span>
                            <div class="feature-content">
                                <div class="feature-title">Basic Reporting</div>
                                <div class="feature-desc">Export inventory list to CSV/Excel, inventory valuation report, movement history report (date range), low stock report</div>
                            </div>
                        </li>
                        
                        <li>
                            <span class="priority-badge priority-mvp">MVP</span>
                            <div class="feature-content">
                                <div class="feature-title">Mobile Responsive</div>
                                <div class="feature-desc">Touch-friendly UI, PWA installable, works offline (view mode), responsive tables with horizontal scroll, quick actions (scan barcode, add stock)</div>
                            </div>
                        </li>
                    </ul>
                    
                    <h3>Implementation Details</h3>
                    
                    <div class="code-block">
<code>// Example: Real-time low stock detection
// apps/api/src/routes/items.routes.ts

import { Router } from 'express';
import { ItemsService } from '../services/items.service';
import { authenticate, requireOrgAccess } from '../middleware/auth';
import { validateRequest } from '../middleware/validation';
import { createItemSchema } from '../schemas/item.schema';

const router = Router();
const itemsService = new ItemsService();

router.post('/items',
  authenticate,
  requireOrgAccess,
  validateRequest(createItemSchema),
  async (req, res) => {
    try {
      const orgId = req.orgId; // From auth middleware
      const data = req.body;
      
      // Create item
      const item = await itemsService.createItem(orgId, data);
      
      res.status(201).json(item);
    } catch (error) {
      res.status(500).json({ error: error.message });
    }
  }
);

// apps/api/src/services/items.service.ts
export class ItemsService {
  async createItem(orgId: string, data: CreateItemDto) {
    return await prisma.$transaction(async (tx) => {
      // Create item
      const item = await tx.item.create({
        data: { orgId, ...data }
      });
      
      // Check if already low stock
      if (item.quantity <= item.reorderLevel) {
        await tx.alert.create({
          data: {
            orgId,
            itemId: item.id,
            alertType: 'low_stock',
            message: `${item.name} is low on stock (${item.quantity} remaining)`
          }
        });
        
        // Send notification (webhook, email, push)
        await this.sendLowStockNotification(item);
      }
      
      return item;
    });
  }
  
  // Inventory adjustment with transaction log
  async adjustInventory({
    itemId,
    quantity,
    movementType,
    notes,
    userId
  }: AdjustInventoryParams) {
    return await prisma.$transaction(async (tx) => {
      // Get current item
      const item = await tx.item.findUnique({
        where: { id: itemId }
      });
      
      if (!item) throw new Error('Item not found');
      
      const quantityBefore = item.quantity;
      const quantityAfter = quantityBefore + quantity;
      
      // Update item quantity
      const updatedItem = await tx.item.update({
        where: { id: itemId },
        data: { 
          quantity: quantityAfter,
          updatedAt: new Date()
        }
      });
      
      // Create movement record
      await tx.inventoryMovement.create({
        data: {
          orgId: item.orgId,
          itemId,
          userId,
          movementType,
          quantity,
          quantityBefore,
          quantityAfter,
          notes
        }
      });
      
      // Check for alerts
      if (quantityAfter <= item.reorderLevel && quantityBefore > item.reorderLevel) {
        await tx.alert.create({
          data: {
            orgId: item.orgId,
            itemId,
            alertType: 'low_stock',
            message: `${item.name} has reached reorder level`
          }
        });
      }
      
      return updatedItem;
    });
  }
}

// Vue composable for items
// apps/app/src/composables/useItems.ts
import { ref, computed } from 'vue';
import { useQuery, useMutation, useQueryClient } from '@tanstack/vue-query';
import { api } from '@/lib/api';
import type { Item, CreateItemDto } from '@shared/types';

export function useItems() {
  const queryClient = useQueryClient();
  
  // Fetch items with pagination and filters
  const { data: itemsData, isLoading, error } = useQuery({
    queryKey: ['items'],
    queryFn: () => api.get<{ data: Item[], pagination: any }>('/items')
  });
  
  const items = computed(() => itemsData.value?.data ?? []);
  const pagination = computed(() => itemsData.value?.pagination);
  
  // Create item mutation
  const createMutation = useMutation({
    mutationFn: (data: CreateItemDto) => api.post<Item>('/items', data),
    onSuccess: () => {
      // Invalidate and refetch items
      queryClient.invalidateQueries({ queryKey: ['items'] });
    }
  });
  
  // Adjust inventory mutation
  const adjustInventoryMutation = useMutation({
    mutationFn: ({ itemId, quantity, notes }: AdjustInventoryParams) =>
      api.post(`/inventory/adjust`, { itemId, quantity, notes }),
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['items'] });
    }
  });
  
  return {
    items,
    pagination,
    isLoading,
    error,
    createItem: createMutation.mutate,
    adjustInventory: adjustInventoryMutation.mutate,
    isCreating: createMutation.isPending,
    isAdjusting: adjustInventoryMutation.isPending
  };
}

// Usage in component
// apps/app/src/components/ItemForm.vue
<script setup lang="ts">
import { ref } from 'vue';
import { useItems } from '@/composables/useItems';
import { NForm, NFormItem, NInput, NButton, NInputNumber } from 'naive-ui';

const { createItem, isCreating } = useItems();

const formValue = ref({
  sku: '',
  name: '',
  quantity: 0,
  reorderLevel: 10
});

const handleSubmit = () => {
  createItem(formValue.value);
};
</script>

<template>
  <n-form @submit.prevent="handleSubmit">
    <n-form-item label="SKU" required>
      <n-input v-model:value="formValue.sku" placeholder="ITEM-001" />
    </n-form-item>
    
    <n-form-item label="Name" required>
      <n-input v-model:value="formValue.name" placeholder="Product name" />
    </n-form-item>
    
    <n-form-item label="Quantity">
      <n-input-number v-model:value="formValue.quantity" :min="0" />
    </n-form-item>
    
    <n-button 
      type="primary" 
      attr-type="submit" 
      :loading="isCreating"
    >
      Save Item
    </n-button>
  </n-form>
</template></code>
                    </div>
                </div>
            </div>
            
            <!-- Tab 6: Competitive Edge Features -->
            <div class="tab-content">
                <div class="section">
                    <h2>ğŸš€ Competitive Edge Features</h2>
                    
                    <h3>Differentiating Features (Stretch Goals)</h3>
                    <ul class="feature-list">
                        <li>
                            <span class="priority-badge priority-edge">EDGE</span>
                            <div class="feature-content">
                                <div class="feature-title">Smart Reorder Suggestions (AI-Powered)</div>
                                <div class="feature-desc">ML model predicts optimal reorder quantities based on historical movement patterns, seasonal trends, lead times. Suggests best time to reorder. Auto-generate purchase orders. This is HUGE for small businesses who waste money over-ordering or lose sales from stock-outs.</div>
                            </div>
                        </li>
                        
                        <li>
                            <span class="priority-badge priority-edge">EDGE</span>
                            <div class="feature-content">
                                <div class="feature-title">Barcode Scanner (Mobile Camera)</div>
                                <div class="feature-desc">Use phone camera to scan barcodes, instantly pull up item or add new item with barcode. Use ZXing library or native WebRTC. Way faster than typing SKUs. Most competitors charge extra for this or require hardware.</div>
                            </div>
                        </li>
                        
                        <li>
                            <span class="priority-badge priority-edge">EDGE</span>
                            <div class="feature-content">
                                <div class="feature-title">Real-Time Collaboration</div>
                                <div class="feature-desc">See when team members are viewing/editing items (cursor presence), instant updates via WebSocket, comment threads on items, @mention teammates. Makes inventory management feel modern.</div>
                            </div>
                        </li>
                        
                        <li>
                            <span class="priority-badge priority-edge">EDGE</span>
                            <div class="feature-content">
                                <div class="feature-title">Offline-First PWA</div>
                                <div class="feature-desc">Service Workers + IndexedDB for offline access, queue changes and sync when online, works in warehouse with spotty internet. Massive advantage over web-only competitors.</div>
                            </div>
                        </li>
                        
                        <li>
                            <span class="priority-badge priority-edge">EDGE</span>
                            <div class="feature-content">
                                <div class="feature-title">API & Webhooks</div>
                                <div class="feature-desc">Public REST API for integrations, webhooks for inventory events (low stock, out of stock), Zapier integration for connecting to other tools. B2B customers LOVE this.</div>
                            </div>
                        </li>
                        
                        <li>
                            <span class="priority-badge priority-stretch">STRETCH</span>
                            <div class="feature-content">
                                <div class="feature-title">Multi-Location Support</div>
                                <div class="feature-desc">Track inventory across multiple warehouses/stores, transfer items between locations, location-specific reorder levels. Essential for growing businesses.</div>
                            </div>
                        </li>
                        
                        <li>
                            <span class="priority-badge priority-stretch">STRETCH</span>
                            <div class="feature-content">
                                <div class="feature-title">Purchase Order Management</div>
                                <div class="feature-desc">Create POs from low stock items, send to suppliers via email, track PO status, receive items into inventory from PO. Completes the procurement cycle.</div>
                            </div>
                        </li>
                        
                        <li>
                            <span class="priority-badge priority-stretch">STRETCH</span>
                            <div class="feature-content">
                                <div class="feature-title">E-commerce Integration</div>
                                <div class="feature-desc">Sync inventory with Shopify, WooCommerce, Square. Auto-update stock levels when orders come in. Prevent overselling. Huge for online sellers.</div>
                            </div>
                        </li>
                        
                        <li>
                            <span class="priority-badge priority-stretch">STRETCH</span>
                            <div class="feature-content">
                                <div class="feature-title">Smart Forecasting Dashboard</div>
                                <div class="feature-desc">Visualize stock trends, predict when items will run out, show seasonality patterns, suggest actions. Use Recharts or Chart.js for beautiful graphs.</div>
                            </div>
                        </li>
                        
                        <li>
                            <span class="priority-badge priority-stretch">STRETCH</span>
                            <div class="feature-content">
                                <div class="feature-title">QR Code Generation</div>
                                <div class="feature-desc">Auto-generate QR codes for items, print labels with item info + QR code, scan QR to view item instantly. Great for physical inventory management.</div>
                            </div>
                        </li>
                        
                        <li>
                            <span class="priority-badge priority-stretch">STRETCH</span>
                            <div class="feature-content">
                                <div class="feature-title">Automated Email Reports</div>
                                <div class="feature-desc">Daily/weekly inventory summary emails, low stock alerts via email/SMS, custom scheduled reports. Keep stakeholders informed automatically.</div>
                            </div>
                        </li>
                        
                        <li>
                            <span class="priority-badge priority-stretch">STRETCH</span>
                            <div class="feature-content">
                                <div class="feature-title">Inventory Kitting/Bundling</div>
                                <div class="feature-desc">Create bundles from multiple items, track bundle inventory, auto-adjust component items when bundle is sold. Useful for manufacturing/assembly.</div>
                            </div>
                        </li>
                    </ul>
                    
                    <h3>Implementation Priority</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Feature</th>
                                <th>Impact</th>
                                <th>Effort</th>
                                <th>Priority</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Barcode Scanner</td>
                                <td>High</td>
                                <td>Medium</td>
                                <td>Build ASAP (Week 3-4)</td>
                            </tr>
                            <tr>
                                <td>API & Webhooks</td>
                                <td>High</td>
                                <td>Medium</td>
                                <td>Week 5</td>
                            </tr>
                            <tr>
                                <td>Offline PWA</td>
                                <td>High</td>
                                <td>High</td>
                                <td>Week 6-7 (post-launch)</td>
                            </tr>
                            <tr>
                                <td>Smart Reorder AI</td>
                                <td>Very High</td>
                                <td>High</td>
                                <td>Month 2 (gather data first)</td>
                            </tr>
                            <tr>
                                <td>Real-Time Collaboration</td>
                                <td>Medium</td>
                                <td>Medium</td>
                                <td>Month 2-3</td>
                            </tr>
                            <tr>
                                <td>Multi-Location</td>
                                <td>Very High</td>
                                <td>Very High</td>
                                <td>Month 3-4 (validate demand first)</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <h3>Quick Win: Barcode Scanner Implementation</h3>
                    <div class="code-block">
<code>// Use QuaggaJS or ZXing for barcode scanning
// apps/app/src/components/BarcodeScanner.vue

<script setup lang="ts">
import { ref, onMounted, onUnmounted } from 'vue';
import Quagga from '@ericblade/quagga2';
import { NButton, NCard } from 'naive-ui';

const emit = defineEmits<{
  scan: [barcode: string]
}>();

const isScanning = ref(false);
const videoRef = ref<HTMLDivElement>();

const startScanning = () => {
  if (!videoRef.value) return;
  
  Quagga.init({
    inputStream: {
      type: 'LiveStream',
      target: videoRef.value,
      constraints: {
        facingMode: 'environment' // Use back camera on mobile
      }
    },
    decoder: {
      readers: ['ean_reader', 'code_128_reader', 'code_39_reader', 'upc_reader']
    }
  }, (err) => {
    if (err) {
      console.error(err);
      return;
    }
    Quagga.start();
    isScanning.value = true;
  });
  
  Quagga.onDetected((result) => {
    const barcode = result.codeResult.code;
    if (barcode) {
      emit('scan', barcode);
      stopScanning();
    }
  });
};

const stopScanning = () => {
  Quagga.stop();
  isScanning.value = false;
};

onUnmounted(() => {
  if (isScanning.value) {
    stopScanning();
  }
});
</script>

<template>
  <n-card title="Barcode Scanner">
    <div ref="videoRef" class="scanner-container" />
    
    <div class="actions">
      <n-button 
        v-if="!isScanning" 
        type="primary"
        @click="startScanning"
      >
        ğŸ“· Start Scanner
      </n-button>
      <n-button 
        v-else 
        type="error"
        @click="stopScanning"
      >
        âŒ Stop Scanner
      </n-button>
    </div>
  </n-card>
</template>

<style scoped>
.scanner-container {
  width: 100%;
  max-width: 500px;
  height: 300px;
  margin: 0 auto;
  background: #000;
  border-radius: 8px;
  overflow: hidden;
}

.actions {
  margin-top: 16px;
  text-align: center;
}
</style>

// Usage in item search view
// apps/app/src/views/Items.vue
<script setup lang="ts">
import { ref } from 'vue';
import { useRouter } from 'vue-router';
import { NInput, NButton, NModal } from 'naive-ui';
import BarcodeScanner from '@/components/BarcodeScanner.vue';
import { useItems } from '@/composables/useItems';

const router = useRouter();
const { items } = useItems();

const showScanner = ref(false);
const searchQuery = ref('');

const handleBarcodeScanned = async (barcode: string) => {
  // Search for item by barcode
  const item = items.value.find(i => i.barcode === barcode);
  
  if (item) {
    // Navigate to item detail
    router.push(`/items/${item.id}`);
  } else {
    // Offer to create new item with this barcode
    router.push(`/items/new?barcode=${barcode}`);
  }
  
  showScanner.value = false;
};
</script>

<template>
  <div class="items-view">
    <div class="search-bar">
      <n-input 
        v-model:value="searchQuery" 
        placeholder="Search by name or SKU..."
        size="large"
      />
      
      <n-button 
        type="primary" 
        size="large"
        @click="showScanner = true"
      >
        ğŸ“· Scan Barcode
      </n-button>
    </div>
    
    <!-- Items list here -->
    
    <n-modal v-model:show="showScanner">
      <barcode-scanner @scan="handleBarcodeScanned" />
    </n-modal>
  </div>
</template>

<style scoped>
.search-bar {
  display: flex;
  gap: 16px;
  margin-bottom: 24px;
}
</style></code>
                    </div>
                    
                    <div class="success">
                        <strong>Why These Features Win:</strong><br>
                        â€¢ Barcode scanning = 10x faster data entry than typing<br>
                        â€¢ API/webhooks = B2B customers will pay more for integration<br>
                        â€¢ Offline support = works where competitors don't (warehouses, retail)<br>
                        â€¢ Smart reorder = prevents stock-outs AND excess inventory (saves $$$)<br>
                        â€¢ These are NOT just nice-to-haves - they solve real pain points
                    </div>
                </div>
            </div>
            
            <!-- Tab 7: Security & Performance -->
            <div class="tab-content">
                <div class="section">
                    <h2>ğŸ”’ Security & Performance</h2>
                    
                    <h3>Security Checklist</h3>
                    <ul class="checklist">
                        <li>
                            <input type="checkbox">
                            <span><strong>Authentication:</strong> Use bcrypt (cost 12+) for password hashing, implement JWT with short expiry (15 min access, 7 day refresh), add rate limiting on login (5 attempts per 15 min)</span>
                        </li>
                        <li>
                            <input type="checkbox">
                            <span><strong>Authorization:</strong> Implement middleware to check org_id on EVERY request, use RLS in Postgres as defense-in-depth, validate user has permission for action (RBAC)</span>
                        </li>
                        <li>
                            <input type="checkbox">
                            <span><strong>Input Validation:</strong> Use Zod schemas for all API inputs, sanitize user input (XSS protection), validate file uploads (type, size, content)</span>
                        </li>
                        <li>
                            <input type="checkbox">
                            <span><strong>SQL Injection:</strong> Always use Prisma parameterized queries, NEVER concatenate SQL strings, avoid raw queries unless necessary</span>
                        </li>
                        <li>
                            <input type="checkbox">
                            <span><strong>CSRF Protection:</strong> Use Next.js built-in CSRF tokens, implement SameSite cookies, verify origin header</span>
                        </li>
                        <li>
                            <input type="checkbox">
                            <span><strong>Rate Limiting:</strong> API rate limits per user and per org, use Redis for distributed rate limiting, implement exponential backoff</span>
                        </li>
                        <li>
                            <input type="checkbox">
                            <span><strong>Data Encryption:</strong> SSL/TLS in transit (enforce HTTPS), encrypt sensitive data at rest, use environment variables for secrets</span>
                        </li>
                        <li>
                            <input type="checkbox">
                            <span><strong>Security Headers:</strong> Set CSP, X-Frame-Options, X-Content-Type-Options, HSTS, use Next.js security headers config</span>
                        </li>
                        <li>
                            <input type="checkbox">
                            <span><strong>Audit Logging:</strong> Log all inventory changes with user ID, log failed login attempts, log permission changes</span>
                        </li>
                        <li>
                            <input type="checkbox">
                            <span><strong>Dependency Security:</strong> Run npm audit regularly, use Dependabot for auto-updates, pin dependency versions</span>
                        </li>
                    </ul>
                    
                    <h3>Security Implementation Examples</h3>
                    <div class="code-block">
<code>// middleware.ts - Enforce authentication & org isolation
import { NextResponse } from 'next/server';
import type { NextRequest } from 'next/server';

export async function middleware(request: NextRequest) {
  // Check if user is authenticated
  const token = request.cookies.get('auth_token')?.value;
  
  if (!token) {
    return NextResponse.redirect(new URL('/login', request.url));
  }
  
  try {
    // Verify JWT
    const payload = await verifyJWT(token);
    
    // Get org_id from path or query
    const orgSlug = request.nextUrl.pathname.split('/')[2];
    
    // Verify user has access to this org
    const hasAccess = await checkOrgAccess(payload.userId, orgSlug);
    
    if (!hasAccess) {
      return NextResponse.json(
        { error: 'Unauthorized' }, 
        { status: 403 }
      );
    }
    
    // Add user context to request headers (accessible in API routes)
    const requestHeaders = new Headers(request.headers);
    requestHeaders.set('x-user-id', payload.userId);
    requestHeaders.set('x-org-id', payload.orgId);
    
    return NextResponse.next({
      request: {
        headers: requestHeaders,
      },
    });
  } catch (error) {
    return NextResponse.redirect(new URL('/login', request.url));
  }
}

export const config = {
  matcher: '/app/:path*', // Protected routes
};

// Rate limiting with Upstash Redis
import { Ratelimit } from '@upstash/ratelimit';
import { Redis } from '@upstash/redis';

const ratelimit = new Ratelimit({
  redis: Redis.fromEnv(),
  limiter: Ratelimit.slidingWindow(100, '1 m'), // 100 requests per minute
});

export async function rateLimit(identifier: string) {
  const { success, limit, remaining } = await ratelimit.limit(identifier);
  
  if (!success) {
    throw new Error('Rate limit exceeded');
  }
  
  return { limit, remaining };
}</code>
                    </div>
                    
                    <h3>Performance Optimization</h3>
                    
                    <div class="tech-stack">
                        <div class="tech-card">
                            <h4>Database Optimization</h4>
                            <ul>
                                <li>Index frequently queried columns (org_id, sku, status)</li>
                                <li>Use partial indexes for filtered queries</li>
                                <li>Implement database connection pooling</li>
                                <li>Use materialized views for complex reports</li>
                                <li>Query optimization: avoid N+1, use joins wisely</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Caching Strategy</h4>
                            <ul>
                                <li>Cache expensive queries in Redis (15 min TTL)</li>
                                <li>Cache category/supplier lists (rarely change)</li>
                                <li>Use React Query for client-side caching</li>
                                <li>CDN for static assets (images, JS, CSS)</li>
                                <li>Invalidate cache on data mutation</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Frontend Optimization</h4>
                            <ul>
                                <li>Code splitting with Next.js dynamic imports</li>
                                <li>Image optimization with next/image</li>
                                <li>Lazy load below-the-fold content</li>
                                <li>Virtual scrolling for long lists (react-window)</li>
                                <li>Debounce search input (300ms)</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>API Optimization</h4>
                            <ul>
                                <li>Pagination (limit 50 items per page)</li>
                                <li>Cursor-based pagination for large datasets</li>
                                <li>GraphQL or tRPC for flexible data fetching</li>
                                <li>Batch API requests where possible</li>
                                <li>Compress responses (gzip/brotli)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="code-block">
<code>// Example: Optimized item list with caching
import { unstable_cache } from 'next/cache';

// Cache category list (rarely changes)
const getCategoriesCache = unstable_cache(
  async (orgId: string) => {
    return await prisma.category.findMany({
      where: { orgId },
      select: { id: true, name: true, color: true }
    });
  },
  ['categories'],
  { revalidate: 3600, tags: ['categories'] } // Cache for 1 hour
);

// Optimized item query with indexes
export async function getItems({
  orgId,
  page = 1,
  limit = 50,
  search,
  categoryId,
  lowStock
}: GetItemsParams) {
  // Build where clause
  const where: Prisma.ItemWhereInput = {
    orgId,
    status: 'active',
    ...(search && {
      OR: [
        { name: { contains: search, mode: 'insensitive' } },
        { sku: { contains: search, mode: 'insensitive' } },
        { description: { contains: search, mode: 'insensitive' } }
      ]
    }),
    ...(categoryId && { categoryId }),
    ...(lowStock && {
      quantity: { lte: prisma.item.fields.reorderLevel }
    })
  };
  
  // Execute parallel queries for better performance
  const [items, total] = await Promise.all([
    prisma.item.findMany({
      where,
      select: {
        id: true,
        sku: true,
        name: true,
        quantity: true,
        reorderLevel: true,
        sellingPrice: true,
        imageUrl: true,
        updatedAt: true,
        category: {
          select: { id: true, name: true }
        }
      },
      orderBy: { updatedAt: 'desc' },
      skip: (page - 1) * limit,
      take: limit,
    }),
    prisma.item.count({ where })
  ]);
  
  return {
    items,
    pagination: {
      page,
      limit,
      total,
      totalPages: Math.ceil(total / limit)
    }
  };
}</code>
                    </div>
                    
                    <div class="warning">
                        <strong>Performance Targets:</strong><br>
                        â€¢ Page load: < 2 seconds (LCP)<br>
                        â€¢ API response: < 200ms (p95)<br>
                        â€¢ Time to interactive: < 3 seconds<br>
                        â€¢ Database query: < 100ms (p95)<br>
                        Monitor with Vercel Analytics or Lighthouse CI
                    </div>
                </div>
            </div>
            
            <!-- Tab 8: Deployment -->
            <div class="tab-content">
                <div class="section">
                    <h2>ğŸš€ Deployment & DevOps</h2>
                    
                    <h3>Deployment Architecture</h3>
                    
                    <div class="tech-stack">
                        <div class="tech-card">
                            <h4>Vercel (Frontend + API)</h4>
                            <div class="label">RECOMMENDED</div>
                            <ul>
                                <li>Deploy Next.js with one click</li>
                                <li>Automatic HTTPS & CDN</li>
                                <li>Preview deployments per PR</li>
                                <li>Edge functions for low latency</li>
                                <li>Environment variables per env</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Supabase (Database + Auth)</h4>
                            <div class="label">RECOMMENDED</div>
                            <ul>
                                <li>Managed PostgreSQL with backups</li>
                                <li>Built-in auth & storage</li>
                                <li>Real-time subscriptions</li>
                                <li>Free tier: 500MB DB, 1GB storage</li>
                                <li>Auto scaling available</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Upstash (Redis)</h4>
                            <div class="label">CACHING</div>
                            <ul>
                                <li>Serverless Redis</li>
                                <li>Pay per request</li>
                                <li>Global replication</li>
                                <li>Perfect for rate limiting</li>
                                <li>Free tier: 10k requests/day</li>
                            </ul>
                        </div>
                        
                        <div class="tech-card">
                            <h4>Cloudflare R2</h4>
                            <div class="label">FILE STORAGE</div>
                            <ul>
                                <li>S3-compatible object storage</li>
                                <li>Zero egress fees</li>
                                <li>Built-in CDN</li>
                                <li>$0.015/GB stored</li>
                                <li>For product images</li>
                            </ul>
                        </div>
                    </div>
                    
                    <h3>Environment Setup</h3>
                    <div class="code-block">
<code># .env.local (Development)
DATABASE_URL=postgresql://user:pass@localhost:5432/inventory_dev
NEXTAUTH_SECRET=your-secret-key-here
NEXTAUTH_URL=http://localhost:3000
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
UPSTASH_REDIS_URL=https://...
CLOUDFLARE_R2_BUCKET=inventory-images
SENDGRID_API_KEY=SG...
SENTRY_DSN=https://...

# .env.production (Vercel)
DATABASE_URL=postgresql://user:pass@db.supabase.co:5432/postgres
NEXTAUTH_SECRET=prod-secret-key-here
NEXTAUTH_URL=https://yourdomain.com
# ... production keys</code>
                    </div>
                    
                    <h3>CI/CD Pipeline</h3>
                    <div class="code-block">
<code># .github/workflows/ci.yml
name: CI

on:
  pull_request:
    branches: [main, develop]
  push:
    branches: [main, develop]

jobs:
  test:
    runs-on: ubuntu-latest
    
    services:
      postgres:
        image: postgres:15
        env:
          POSTGRES_PASSWORD: postgres
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
        ports:
          - 5432:5432
      
      redis:
        image: redis:7
        options: >-
          --health-cmd "redis-cli ping"
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
        ports:
          - 6379:6379
    
    steps:
      - uses: actions/checkout@v4
      
      - uses: pnpm/action-setup@v2
        with:
          version: 8
      
      - uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'pnpm'
      
      - name: Install dependencies
        run: pnpm install --frozen-lockfile
      
      - name: Type check
        run: pnpm run type-check
      
      - name: Lint
        run: pnpm run lint
      
      - name: Run Prisma migrations
        run: pnpm --filter api prisma migrate deploy
        env:
          DATABASE_URL: postgresql://postgres:postgres@localhost:5432/test
      
      - name: Run unit tests
        run: pnpm test
        env:
          DATABASE_URL: postgresql://postgres:postgres@localhost:5432/test
          REDIS_URL: redis://localhost:6379
      
      - name: Run API integration tests
        run: pnpm --filter api test:integration
        env:
          DATABASE_URL: postgresql://postgres:postgres@localhost:5432/test
          REDIS_URL: redis://localhost:6379
      
      - name: Build all apps
        run: pnpm build
        env:
          DATABASE_URL: postgresql://postgres:postgres@localhost:5432/test
      
      - name: Upload coverage
        uses: codecov/codecov-action@v3
        with:
          files: ./coverage/coverage-final.json

  e2e:
    runs-on: ubuntu-latest
    needs: test
    
    steps:
      - uses: actions/checkout@v4
      
      - uses: pnpm/action-setup@v2
        with:
          version: 8
      
      - uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'pnpm'
      
      - name: Install dependencies
        run: pnpm install --frozen-lockfile
      
      - name: Install Playwright browsers
        run: pnpm --filter app exec playwright install --with-deps
      
      - name: Run E2E tests
        run: pnpm --filter app test:e2e
      
      - name: Upload Playwright report
        if: always()
        uses: actions/upload-artifact@v3
        with:
          name: playwright-report
          path: apps/app/playwright-report/

  deploy-preview:
    needs: test
    if: github.event_name == 'pull_request'
    runs-on: ubuntu-latest
    
    strategy:
      matrix:
        app: [sales, app, admin, api]
    
    steps:
      - uses: actions/checkout@v4
      
      - uses: pnpm/action-setup@v2
        with:
          version: 8
      
      - name: Deploy ${{ matrix.app }} to preview
        uses: amondnet/vercel-action@v25
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
          vercel-project-id: ${{ secrets[format('VERCEL_{0}_PROJECT_ID', matrix.app)] }}
          working-directory: apps/${{ matrix.app }}
          scope: ${{ secrets.VERCEL_ORG_ID }}

  deploy-production:
    needs: [test, e2e]
    if: github.ref == 'refs/heads/main' && github.event_name == 'push'
    runs-on: ubuntu-latest
    
    strategy:
      matrix:
        app: [sales, app, admin]
    
    steps:
      - uses: actions/checkout@v4
      
      - name: Deploy ${{ matrix.app }} to production
        uses: amondnet/vercel-action@v25
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
          vercel-project-id: ${{ secrets[format('VERCEL_{0}_PROJECT_ID', matrix.app)] }}
          vercel-args: '--prod'
          working-directory: apps/${{ matrix.app }}
  
  deploy-api:
    needs: [test, e2e]
    if: github.ref == 'refs/heads/main' && github.event_name == 'push'
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v4
      
      - name: Deploy API to Railway
        uses: bervProject/railway-deploy@main
        with:
          railway_token: ${{ secrets.RAILWAY_TOKEN }}
          service: api</code>
                    </div>
                    
                    <h3>Package.json Scripts</h3>
                    <div class="code-block">
<code>// Root package.json
{
  "name": "inventory-saas-monorepo",
  "private": true,
  "scripts": {
    "dev": "pnpm --parallel --filter \"./apps/**\" dev",
    "dev:sales": "pnpm --filter sales dev",
    "dev:app": "pnpm --filter app dev",
    "dev:admin": "pnpm --filter admin dev",
    "dev:api": "pnpm --filter api dev",
    
    "build": "pnpm --filter \"./apps/**\" build",
    "build:sales": "pnpm --filter sales build",
    "build:app": "pnpm --filter app build",
    "build:admin": "pnpm --filter admin build",
    "build:api": "pnpm --filter api build",
    
    "test": "vitest run",
    "test:watch": "vitest",
    "test:coverage": "vitest run --coverage",
    "test:e2e": "pnpm --filter app test:e2e",
    "test:e2e:ui": "pnpm --filter app test:e2e:ui",
    
    "type-check": "pnpm --recursive run type-check",
    "lint": "pnpm --recursive run lint",
    "format": "prettier --write \"**/*.{ts,tsx,vue,js,json,md}\"",
    
    "db:migrate": "pnpm --filter api prisma migrate dev",
    "db:deploy": "pnpm --filter api prisma migrate deploy",
    "db:seed": "pnpm --filter api prisma db seed",
    "db:studio": "pnpm --filter api prisma studio",
    
    "ci": "pnpm type-check && pnpm lint && pnpm test && pnpm build"
  }
}

// apps/api/package.json
{
  "name": "api",
  "scripts": {
    "dev": "tsx watch src/server.ts",
    "build": "tsc && tsc-alias",
    "start": "node dist/server.js",
    "test": "vitest run",
    "test:watch": "vitest",
    "test:integration": "vitest run tests/integration",
    "type-check": "tsc --noEmit"
  }
}

// apps/app/package.json  
{
  "name": "app",
  "scripts": {
    "dev": "vite",
    "build": "vue-tsc && vite build",
    "preview": "vite preview",
    "test": "vitest run",
    "test:watch": "vitest",
    "test:e2e": "playwright test",
    "test:e2e:ui": "playwright test --ui",
    "type-check": "vue-tsc --noEmit"
  }
}</code>
                    </div>
                    
                    <h3>PWA Configuration (Offline-First)</h3>
                    <div class="code-block">
<code>// apps/app/vite.config.ts
import { defineConfig } from 'vite';
import vue from '@vitejs/plugin-vue';
import { VitePWA } from 'vite-plugin-pwa';

export default defineConfig({
  plugins: [
    vue(),
    VitePWA({
      registerType: 'autoUpdate',
      includeAssets: ['favicon.ico', 'robots.txt', 'logo.svg'],
      manifest: {
        name: 'Inventory Manager',
        short_name: 'Inventory',
        description: 'Simple inventory management for small businesses',
        theme_color: '#667eea',
        background_color: '#ffffff',
        display: 'standalone',
        icons: [
          {
            src: '/pwa-192x192.png',
            sizes: '192x192',
            type: 'image/png'
          },
          {
            src: '/pwa-512x512.png',
            sizes: '512x512',
            type: 'image/png'
          },
          {
            src: '/pwa-512x512.png',
            sizes: '512x512',
            type: 'image/png',
            purpose: 'any maskable'
          }
        ]
      },
      workbox: {
        globPatterns: ['**/*.{js,css,html,ico,png,svg,woff2}'],
        runtimeCaching: [
          {
            urlPattern: /^https:\/\/api\.yourdomain\.com\/.*$/i,
            handler: 'NetworkFirst',
            options: {
              cacheName: 'api-cache',
              expiration: {
                maxEntries: 100,
                maxAgeSeconds: 60 * 60 // 1 hour
              },
              cacheableResponse: {
                statuses: [0, 200]
              }
            }
          },
          {
            urlPattern: /^https:\/\/.*\.cloudflare\.com\/.*\.(jpg|jpeg|png|webp)$/i,
            handler: 'CacheFirst',
            options: {
              cacheName: 'image-cache',
              expiration: {
                maxEntries: 500,
                maxAgeSeconds: 60 * 60 * 24 * 30 // 30 days
              }
            }
          }
        ]
      },
      devOptions: {
        enabled: true // Enable PWA in dev mode for testing
      }
    })
  ]
});

// Offline sync queue composable
// apps/app/src/composables/useOfflineSync.ts
import { ref, watch } from 'vue';
import { useOnline } from '@vueuse/core';
import { openDB, type IDBPDatabase } from 'idb';

interface QueuedAction {
  id: string;
  type: 'CREATE' | 'UPDATE' | 'DELETE';
  endpoint: string;
  data: any;
  timestamp: number;
}

const DB_NAME = 'offline-queue';
const STORE_NAME = 'actions';

export function useOfflineSync() {
  const isOnline = useOnline();
  const queueSize = ref(0);
  const isSyncing = ref(false);
  
  let db: IDBPDatabase | null = null;
  
  const initDB = async () => {
    db = await openDB(DB_NAME, 1, {
      upgrade(db) {
        if (!db.objectStoreNames.contains(STORE_NAME)) {
          db.createObjectStore(STORE_NAME, { keyPath: 'id' });
        }
      }
    });
    
    await updateQueueSize();
  };
  
  const queueAction = async (action: Omit<QueuedAction, 'id' | 'timestamp'>) => {
    if (!db) await initDB();
    
    const queuedAction: QueuedAction = {
      ...action,
      id: crypto.randomUUID(),
      timestamp: Date.now()
    };
    
    await db!.add(STORE_NAME, queuedAction);
    await updateQueueSize();
    
    // Try to sync immediately if online
    if (isOnline.value) {
      await syncQueue();
    }
  };
  
  const syncQueue = async () => {
    if (!db || isSyncing.value || !isOnline.value) return;
    
    isSyncing.value = true;
    
    try {
      const actions = await db.getAll(STORE_NAME);
      
      for (const action of actions) {
        try {
          // Execute queued API call
          await fetch(action.endpoint, {
            method: action.type === 'DELETE' ? 'DELETE' : 'POST',
            headers: {
              'Content-Type': 'application/json',
              'Authorization': `Bearer ${localStorage.getItem('token')}`
            },
            body: action.type !== 'DELETE' ? JSON.stringify(action.data) : undefined
          });
          
          // Remove from queue on success
          await db.delete(STORE_NAME, action.id);
        } catch (error) {
          console.error('Failed to sync action:', error);
          // Keep in queue, will retry later
        }
      }
      
      await updateQueueSize();
    } finally {
      isSyncing.value = false;
    }
  };
  
  const updateQueueSize = async () => {
    if (!db) return;
    const count = await db.count(STORE_NAME);
    queueSize.value = count;
  };
  
  const clearQueue = async () => {
    if (!db) return;
    await db.clear(STORE_NAME);
    await updateQueueSize();
  };
  
  // Auto-sync when coming back online
  watch(isOnline, (online) => {
    if (online) {
      syncQueue();
    }
  });
  
  // Initialize on composable creation
  initDB();
  
  return {
    isOnline,
    queueSize,
    isSyncing,
    queueAction,
    syncQueue,
    clearQueue
  };
}

// Usage in component
<script setup lang="ts">
import { useOfflineSync } from '@/composables/useOfflineSync';
import { NAlert, NBadge } from 'naive-ui';

const { isOnline, queueSize, syncQueue } = useOfflineSync();

const createItem = async (data: any) => {
  if (!isOnline.value) {
    // Queue for later
    await queueAction({
      type: 'CREATE',
      endpoint: '/api/items',
      data
    });
    
    // Show optimistic UI update
    showNotification('Saved offline. Will sync when online.');
  } else {
    // Normal API call
    await api.post('/api/items', data);
  }
};
</script>

<template>
  <div>
    <n-alert v-if="!isOnline" type="warning">
      You're offline. Changes will sync when you're back online.
      <n-badge v-if="queueSize > 0" :value="queueSize" /> pending
    </n-alert>
  </div>
</template></code>
                    </div>
                    <div class="code-block">
<code># Development migrations
npm run prisma:migrate:dev -- --name add_barcode_field

# Production migrations (run in CI/CD before deploy)
npx prisma migrate deploy

# Seed database with test data
npx prisma db seed

# Reset database (dev only)
npx prisma migrate reset</code>
                    </div>
                    
                    <h3>Monitoring Setup</h3>
                    <div class="code-block">
<code>// sentry.client.config.ts
import * as Sentry from '@sentry/nextjs';

Sentry.init({
  dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,
  environment: process.env.NODE_ENV,
  tracesSampleRate: 0.1,
  beforeSend(event, hint) {
    // Don't send 404s or auth errors
    if (event.exception?.values?.[0]?.type === 'NotFoundError') {
      return null;
    }
    return event;
  },
});

// posthog.ts
import posthog from 'posthog-js';

if (typeof window !== 'undefined') {
  posthog.init(process.env.NEXT_PUBLIC_POSTHOG_KEY!, {
    api_host: 'https://app.posthog.com',
    capture_pageview: false, // We'll capture manually
    capture_pageleave: true,
  });
}

// Track events
export const trackEvent = (eventName: string, properties?: Record<string, any>) => {
  posthog.capture(eventName, properties);
};</code>
                    </div>
                    
                    <h3>Backup Strategy</h3>
                    <ul class="checklist">
                        <li>
                            <input type="checkbox">
                            <span><strong>Database Backups:</strong> Supabase auto-backups daily, point-in-time recovery for 7 days (Pro plan)</span>
                        </li>
                        <li>
                            <input type="checkbox">
                            <span><strong>Manual Backups:</strong> Weekly full DB dump to S3, keep for 30 days</span>
                        </li>
                        <li>
                            <input type="checkbox">
                            <span><strong>Image Backups:</strong> R2 versioning enabled, replicate to second region</span>
                        </li>
                        <li>
                            <input type="checkbox">
                            <span><strong>Disaster Recovery:</strong> Document restoration process, test recovery quarterly</span>
                        </li>
                    </ul>
                    
                    <h3>Launch Checklist</h3>
                    <ul class="checklist">
                        <li><input type="checkbox"> <span>Domain purchased and DNS configured</span></li>
                        <li><input type="checkbox"> <span>SSL certificate active (auto via Vercel)</span></li>
                        <li><input type="checkbox"> <span>Production database provisioned</span></li>
                        <li><input type="checkbox"> <span>All environment variables set in Vercel</span></li>
                        <li><input type="checkbox"> <span>Stripe account in production mode</span></li>
                        <li><input type="checkbox"> <span>Email service configured (SendGrid verified)</span></li>
                        <li><input type="checkbox"> <span>Error tracking active (Sentry)</span></li>
                        <li><input type="checkbox"> <span>Analytics installed (PostHog)</span></li>
                        <li><input type="checkbox"> <span>Uptime monitoring configured</span></li>
                        <li><input type="checkbox"> <span>Legal pages published (ToS, Privacy)</span></li>
                        <li><input type="checkbox"> <span>Support email active</span></li>
                        <li><input type="checkbox"> <span>Database backups verified</span></li>
                        <li><input type="checkbox"> <span>Rate limiting tested</span></li>
                        <li><input type="checkbox"> <span>Security headers configured</span></li>
                        <li><input type="checkbox"> <span>Performance tested (Lighthouse > 90)</span></li>
                        <li><input type="checkbox"> <span>Mobile responsiveness verified</span></li>
                        <li><input type="checkbox"> <span>SEO meta tags added</span></li>
                        <li><input type="checkbox"> <span>Social share images configured</span></li>
                        <li><input type="checkbox"> <span>Google Search Console set up</span></li>
                        <li><input type="checkbox"> <span>Favicon and PWA icons added</span></li>
                    </ul>
                    
                    <div class="success">
                        <strong>Launch Day Readiness:</strong> Use this checklist to ensure nothing is forgotten. Test everything in staging first. Have a rollback plan. Monitor closely for first 48 hours.
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function switchTab(tabIndex) {
            // Update tab buttons
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach((tab, index) => {
                if (index === tabIndex) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
            
            // Update tab content
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach((content, index) => {
                if (index === tabIndex) {
                    content.classList.add('active');
                } else {
                    content.classList.remove('active');
                }
            });
        }
    </script>
</body>
</html>